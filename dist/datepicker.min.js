!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DatePicker=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var a=t(function(e,t){t.__esModule=!0;var a=function(){var e={};return{$on:function(t,a){e[t]||(e[t]=[]),e[t].push(a)},$emit:function(t,a){var n=arguments,r=this,i=[].shift.call(arguments),s=e[i];if(!s||0===s.length)return!1;for(var l=0,d=void 0;d=s[l++];)d.apply(r,n)},$remove:function(t,a){var n=e[t];if(!n)return!1;if(a)for(var r=n.length-1;r>=0;r--)n[r]===a&&n.splice(r,1);else n&&(n.length=0)}}}();t.default=a});e(a);var n=t(function(e,t){function a(e){return"[object Array]"===r(e)}function n(e,t){if(1===e.length)return e;if(0===e.length)return[];for(var a=[],r=[],i=[],s=e[0],l=0;l<e.length;l++)e[l]<s?a.push(e[l]):e[l]>s?r.push(e[l]):i.push(e[l]);return t?[].concat(n(a,t),i,n(r,t)):[].concat(n(r,t),i,n(a,t))}t.__esModule=!0,t.diff=function(e,t,a){if(void 0===a&&(a="month"),"month"==a)return Math.abs(12*e.getFullYear()+e.getMonth()-(12*t.getFullYear()+t.getMonth()));if("days"===a){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return Math.round(n-r)/864e5}},t.attrSelector=function(e,t){return"["+e+'="'+t+'"]'},t.getDates=function(e,t){var a=new Date(e,t,1),n=Date.UTC(a.getFullYear(),a.getMonth()+1,0);return new Date(n).getUTCDate()},t.padding=function(e){return""+(e>9?e:"0"+e)},t.getFirstDay=function(e,t){return new Date(e,t,1).getDay()},t.getWeeksOfMonth=function(e){var t=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0),n=t.getDay()+a.getDate();return Math.ceil(n/7)},t.getLastDay=function(e,t){return new Date(e,t+1,0).getDay()},t.getLastDates=function(e){for(var a=t.getLastDay(e.getFullYear(),e.getMonth()),n=e.getDate()-a,r=[],i=0;i<=a;i++)n+i<=e.getDate()&&r.push(n+i);return r},t.inArray=function(e,t){return!(!a(e)||e.length<=0||!t)&&~e.indexOf(t)},t.attr=function(e,t,a){if(void 0===a&&(a=void 0),!e)return null;var n=e.getAttribute(t);return void 0===a&&(a=""),n||e.setAttribute(t,a)},t.remove=function(e,t){if(~e.indexOf(t)){var a=e.indexOf(t);e.splice(a,1)}return e};var r=function(e){return Object.prototype.toString.call(e)};t.isBoolean=function(e){return"[object Boolean]"===r(e)},t.isArray=a,t.isObject=function(e){return"[object Object]"===r(e)},t.isNumber=function(e){return"[object Number]"===r(e)},t.isString=function(e){return"[object String]"===r(e)},t.isDate=function(e){return"[object Date]"===r(e)},t.hasClass=function(e,t){return!!e&&e.classList.contains(t)},t.removeClass=function(e,t){if(e)return e.classList.remove(t)},t.addClass=function(e,t){if(e&&!e.classList.contains(t))return e.classList.add(t)},t.element=function(e,t){var a=e.querySelectorAll(t);return!(a.length<=0)&&(a.length<=1?a[0]:a)},t.parseEl=function(e){return e?e.indexOf("#")>=0?document.querySelector(e):e.indexOf(".")>=0?document.querySelectorAll(e)[0]:~["a","p","div","section","span","article","header","footer","main","aside","i","strong","small","tr","table"].indexOf(e)?(console.error("[DatePicker Warn] do not mount datepicker to pure html tag, use class name or id instead "),null):document.querySelector(e):null},t.defaultLanguage={locale:"zh-cn",pack:{days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["01\u6708","02\u6708","03\u6708","04\u6708","05\u6708","06\u6708","07\u6708","08\u6708","09\u6708","10\u6708","11\u6708","12\u6708"],year:"\u5e74"}},t.setLanguage=function(e){var t,a=e.locale.toLowerCase(),n=e.pack,r=n.months,i=n.days;return t="en"===a||"en-us"===a||"en-gb"===a?function(e,t){return r[t]+" "+e}:function(e,t){return""+e+n.year+r[t]},{week:i,title:t}},t.getLanguage=function(e,a){return a&&e[a]?{locale:a,pack:e[a]}:t.defaultLanguage},t.quickSort=n});e(n);var r=t(function(e,t){function a(e){return parseInt(e,10)}function r(e){if(!e)return new Date;if(e instanceof Date)return e;var t=new Date(e);return t.getTime()||(t=null),t}t.__esModule=!0,t.format=function(e,t,a){var r={DD:n.padding(e.getDate()),MM:n.padding(e.getMonth()+1),YYYY:e.getFullYear()};return{origin:e,date:r.DD,month:r.MM,year:r.YYYy,day:e.getDay(),value:t.replace(/(?:\b|%)([dDMyYHhaAmsz]+|ap|AP)(?:\b|%)/g,function(e,t){return void 0===r[t]?t:r[t]})}},t.parseFormatted=function(e,t){var n,i,s,l={DD:"([0-9][0-9])",dd:"([0-9][0-9])",MM:"([0-9][0-9])",mm:"([0-9][0-9])",YYYY:"([0-9][0-9][0-9][0-9])",yyyy:"([0-9][0-9][0-9][0-9])","%":""},d="",o=0,u=[""],c="",h=r(e);if(h)return h;for(h=new Date(2e3,0,1);o<t.length;){for(n=t.charAt(o);o+1<t.length&&void 0!==l[n+t.charAt(o+1)];)n+=t.charAt(++o);void 0!==(c=l[n])?""!==c&&(d+=l[n],u.push(n)):d+=n,o++}if(i=e.match(new RegExp(d)),s=u.length,!i||i.length!==s)return null;for(o=0;o<s;o++)if(""!==(n=u[o]))switch(c=a(i[o]),n){case"YYYY":h.setYear(c);break;case"MM":h.setMonth(c);break;case"DD":h.setDate(c)}return h}});e(r);var i=t(function(e,t){function a(e){var t=["calendar-cell"," calendar-date-cell"];return e?(n.diff(e,o,"days")<0&&t.push("disabled"),0===e.getDay()&&t.push("calendar-cell-weekend"),6===e.getDay()&&t.push("calendar-cell-weekday")):(t.push("disabled"),t.push("empty")),t.join(" ")}function i(e,t,i){for(var s=[],l=new Date(e,t,1),d={year:l.getFullYear(),month:l.getMonth(),date:l.getDate(),index:l.getMonth()},o=n.getFirstDay(d.year,d.month),u=0;u<o;u++)s.push({date:"",className:a(),text:"<div class='date'></div><div class='placeholder'></div>",key:""});for(var c=1;c<=n.getDates(d.year,d.month);c++){var h=new Date(d.year,d.month,c),f=r.format(h,i).value,v='<div class="date">'+n.padding(c)+'</div><div class="placeholder"></div>';s.push({date:c,className:a(h),text:v,key:f})}return{template:s.map(function(e){return'<div class="'+e.className+'"\n            '+(e.key?"data-date="+e.key:"")+">"+e.text+"</div>"}).join(" "),year:d.year,month:d.index}}function s(e,t,a){for(var n=[],r=0;r<=a;r++){var s=new Date(e.getFullYear(),e.getMonth()+r,1),l=i(s.getFullYear(),s.getMonth(),t);n.push({template:l.template,year:l.year,month:l.month})}return n}function l(e,t){return t?"":" calendar-"+e}function d(e,t,a,n){var r=n.week.map(function(e,t){var a=["calendar-cell","calendar-day-cell"];return 0===t?a.push("calendar-cell-weekday"):6===t&&a.push("calendar-cell-weekend"),'<div class="'+a.join(" ")+'">'+e+"</div>"}).join(""),i=e.map(function(e,i){var s=e.year,d=e.month,o='<div class="calendar-title">'+n.title(s,d)+"</div>",u=e.template,c="";return t||a?c='<div class="calendar-main'+l(i,a)+'">\n                   <div class="calendar-head">'+o+'</div>  \n                   <div class="calendar-day"> '+r+'</div>\n                    <div class="calendar-body">'+u+"</div>\n            </div>":c+="<div class='calendar-main calendar-"+i+'\'>\n                    <div class="calendar-head">'+o+'</div>\n                    <div class="calendar-body">'+u+"</div>\n              </div>",c});return t||a||i.unshift('<div class="calendar-day">'+r+"</div>"),i.join("")}t.__esModule=!0;var o=new Date;t.default=function(e,t,a,r,i,l){var o="calendar-"+(r?"double-views":i?"single-view":"flat-view"),u=d(s(e,a,r?1:i?0:n.diff(e,t)),r,i,l);return'<div class="calendar '+o+'"> '+(r||i?"\n         <div class=\"calendar-action-bar\">\n            <button class='calendar-action calendar-action-prev'><span>prev</span></button>\n            <button class='calendar-action calendar-action-next'><span>next</span></button>\n         </div>\n        ":"")+u+"</div>"}});e(i);var s=t(function(e,t){function a(e,t,a){for(var r=[],i=0;i<e.length;i++){var s=n.attr(e[i],"data-date");s&&r.push(s)}for(var l=-1,d=-1,i=0;i<r.length;i++){var o=r[i];o===t?l=i:o===a&&(d=i)}return d===l||d<0?[]:r.slice(l+1,d)}function r(e,t,a,r){for(var i=[],s=a[0],l=a[a.length-1],o=0;o<e.length;o++){var u=e[o],c=e[o+1];if(a.length>0){var h=n.attr(e[o],"data-date");h===s?n.addClass(u,"start-date"):h===l&&n.addClass(u,"end-date")}else if(u&&c){var f=n.attr(u,"data-date"),v=n.attr(c,"data-date");if(f&&v){var g=r(f);n.diff(g,d,"days")>=0&&(n.inArray(t,v)&&n.inArray(t,f)||n.inArray(t,f)&&!n.inArray(t,v))&&i.length<2&&(n.addClass(u,"start-date"),n.addClass(c,"end-date"),i.push(f,v))}}}return a.length>0&&(i=a),i}function i(e,t){for(var a=0;a<e.length;a++){var r=e[a];n.attr(r,"data-date")===t&&n.addClass(r,"active")}}function s(e,t,a){if(a)for(var r=t.querySelectorAll(".in-range"),i=0;i<r.length;i++)n.removeClass(r[i],"in-range");else for(i=0;i<e.length;i++){var s=n.attrSelector("data-date",e[i]),l=t.querySelector(s);n.hasClass(l,"active")||n.addClass(l,"in-range")}}t.__esModule=!0;var l=new Date,d=new Date(l.getFullYear(),l.getMonth(),l.getDate());t.ranged=s,t.setDefaultRange=function(e,t,n,l,d,o,u){var c=[];if(o){var h=a(t,(c=r(t,d,n,u))[0],c[c.length-1]);h.length>0&&s(h,e,!1)}else c=n.length>0?n:[l];for(var f=0;f<c.length;f++)i(t,c[f]);return c}});e(s);var l=t(function(e,t){t.__esModule=!0,t.monthSwitch=function(e,t,a){var n={year:this.date.getFullYear(),month:this.date.getMonth(),date:this.date.getDate()},r=n.month+e;this.multiViews&&(r+=e>0?1:-1),this.date=new Date(n.year,r,n.date),this.buildCalendar(t,a),this.handlePickDate(this.element,this.selected,this.double,this.dates,this.parse,this.format,this.limit,this.update),this.dataRenderer(this.data)},t.buildCalendar=function(e,t){var a=this;if(this.element=n.parseEl(e),!this.element)return console.error("[Calendar Warn] invalid selector,current selector "+e),!1;var r=this.startDate.getTime(),l=(this.endDate.getTime(),this.date.getTime());this.element.innerHTML=i.default(this.date,this.endDate,this.dateFormat,this.multiViews,this.flatView,n.setLanguage(t)),this.selected=s.setDefaultRange(this.element,this.element.querySelectorAll(".calendar-date-cell:not(.empty)"),this.selected,this.format(this.date).value,this.dates,this.double,this.parse);var d=this.element.querySelector(".calendar-action-prev"),o=this.element.querySelector(".calendar-action-next");d&&o&&(n.diff(this.date,this.endDate)>=2?o.addEventListener("click",function(){a.monthSwitch(1,e,t),n.removeClass(d,"disabled"),n.removeClass(d,"calendar-action-disabled")}):(n.addClass(o,"disabled"),n.addClass(o,"calendar-action-disabled")),l>r?d.addEventListener("click",function(){a.monthSwitch(-1,e,t),n.removeClass(o,"disabled"),n.removeClass(o,"calendar-action-disabled")}):(n.addClass(d,"disabled"),n.addClass(d,"calendar-action-disabled")))},t.init=function(e,t){if(e.format&&(this.dateFormat=e.format),!e.multiViews&&e.flatView&&(this.multiViews=!1,this.flatView=!0),!e.flatView&&e.multiViews&&(this.flatView=!1,this.multiViews=!0),e.flatView||e.multiViews||(this.flatView=!1,this.multiViews=!1),this.double=!!n.isBoolean(e.doubleSelect)&&e.doubleSelect,this.startDate=n.isDate(e.from)?e.from:new Date,this.date=this.startDate,this.endDate=n.isDate(e.to)?e.to:new Date(this.date.getFullYear(),this.date.getMonth()+6,this.date.getDate()),this.flatView){var a=this.endDate.getFullYear(),r=this.endDate.getMonth(),i=this.endDate.getDate();this.endDate=new Date(a,r+1,i)}this.limit=this.double&&n.isNumber(e.limit)?e.limit:1,this.data=t.data,t.dates.length<=0?(this.double=!1,this.limit=1):this.dates=t.dates,this.buildCalendar(e.el,n.getLanguage(e.language,e.defaultLanguage)),this.handlePickDate(this.element,this.selected,this.double,this.dates,this.parse,this.format,this.limit,this.update)}});e(l);var d=t(function(e,t){function a(e,t,a,i,l,d,o){var u={start:a.querySelector(".start-date"),end:a.querySelector(".end-date")},c=a.querySelectorAll(".active");if(d){var h=e[0],f=e[e.length-1],v={start:a.querySelector(n.attrSelector("data-date",h)),end:a.querySelector(n.attrSelector("data-date",f))};if(h===f)n.removeClass(u.start,"start-date"),n.removeClass(u.start,"active"),n.removeClass(u.end,"end-date"),n.removeClass(u.end,"active"),n.addClass(v.start,"active"),n.addClass(v.start,"start-date");else{var g=r(i(h),i(f));n.addClass(v.end,"active"),g>0?g>l?(n.addClass(v.end,"start-date"),n.removeClass(u.start,"start-date"),n.removeClass(u.start,"active")):o?n.addClass(v.end,"end-date"):(n.removeClass(v.start,"active"),n.removeClass(v.start,"start-date"),n.addClass(v.end,"start-date")):g<0&&(n.removeClass(v.start,"active"),n.removeClass(v.start,"start-date"),n.addClass(v.end,"start-date"))}s.ranged([],a,!0),o&&s.ranged(t,a,!1)}else{for(var m=0;m<c.length;m++)n.removeClass(c[m],"active");n.addClass(a.querySelector(n.attrSelector("data-date",e[0])),"active")}}function r(e,t){var a=n.diff(e,t,"days");return 0===a?0:-1*a}function i(e,t,a,i,s,l,d,o){function u(e){return n.inArray(l,e)}var c=[],h=[],f=t[0],v=t[t.length-1],g=o(f),m=r(g,o(v)),D=t.length;if(D>=2)if(m<=0)u(e)?t.shift():t=[t[0]];else if(n.inArray(l,v))for(var p=g.getFullYear(),y=g.getMonth(),w=g.getDate(),b=1;b<m;b++){var C=d(x=new Date(p,y,w+b)).value;u(C)&&h.push(C),c.push(C)}else u()&&v&&(t.shift(),c.push(v));else if(1===D){var M=t[t.length-1];u(M)?(t=[]).push(M):t=a}else t=a;if((s=c.length===h.length)||(t=[t[t.length-1]]),2===t.length){var Y=null,S=o(t[t.length-1]),F=o(t[0]),k=-1*r(S,F);if(k>0){var p=F.getFullYear(),y=F.getMonth(),A=F.getDate();c=[],h=[];for(b=0;b<k;b++){var x=new Date(p,y,A+b),L=d(x).value;u(L)&&(Y=L,h.push(L)),~c.indexOf(L)||c.push(L)}var V=r(o(Y),S);1===V||-1===V?s=!0:(c=[],t=[t[0]],s=!1)}h.length===c.length?s=!0:(s=!1,t=[t[0]]),c.length>i&&(s=!1,t=[t[t.length-1]])}return{selected:t,allValid:s,inRange:h,range:c}}t.__esModule=!0,t.default=function(e,t,r,s,l,d,o,u){for(var c=e.querySelectorAll(".calendar-date-cell"),h=0;h<c.length;h++)!function(h){var f=c[h];f.addEventListener("click",function(c){var h=!1,v=t,g=[],m=n.attr(f,"data-date"),D=t.indexOf(m);if(!m||D>=0)return!1;if((r&&t.length>=2||!r)&&(t=[]),t.push(m),r){var p=i(m,t,v,o,h,s,d,l);t=p.selected,g=p.range,h=p.allValid}a(t,g,e,l,o,r,h),u(t)})}(h)}});return e(d),e(t(function(e,t){t.__esModule=!0;var i=function(){return function(e){var t=this;return this.init=l.init,this.date=new Date,this.limit=1,this.double=!1,this.dateFormat="YYYY-MM-DD",this.element=null,this.startDate=new Date,this.endDate=null,this.selected=[],this.flatView=!1,this.multiViews=!1,this.monthSwitch=l.monthSwitch,this.buildCalendar=l.buildCalendar,this.handlePickDate=d.default,this.format=function(e){return r.format(e,t.dateFormat)},this.parse=function(e){return r.parseFormatted(e,t.dateFormat)},this.update=function(e){a.default.$emit("update",e),t.selected=e},this.dataRenderer=function(e){a.default.$emit("data",{data:e,nodeList:t.element.querySelectorAll(".calendar-date-cell")})},e.renderData||this.init(e,{}),{on:a.default.$on,data:function(a){if(e.renderData){var n=a&&a({dates:[],data:{}});t.init(e,{data:n.data,dates:n.dates}),t.dataRenderer(n.data),t.update(t.selected)}},diff:function(e,t){return n.diff(e,t,"days")},parse:this.parse,format:this.format}}}();t.default=i}))});