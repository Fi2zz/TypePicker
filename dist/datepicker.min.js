  /*
   *  TypePicker v1.6.9
   *  Fi2zz / wenjingbiao@outlook.com
   *  https://github.com/Fi2zz/datepicker
   *  (c) 2017-2018, wenjingbiao@outlook.com
   *  MIT License
  */
  
  
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DatePicker=t()}(this,function(){"use strict";var e=function(e,t){return"["+e+'="'+t+'"]'};function t(e){return parseInt(e,10)}function a(e,t){var a=new Date(e,t,1),n=Date.UTC(a.getFullYear(),a.getMonth()+1,0);return new Date(n).getUTCDate()}function n(e,t,a,n){var r;if(void 0===a&&(a="month"),!c(e)||!c(t))return 0;if("month"===a)r=Math.abs(12*e.getFullYear()+e.getMonth())-(12*t.getFullYear()+t.getMonth());else if("days"===a){var i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=Math.ceil(i-s)/864e5;r=n?Math.abs(l):l}return r}var r=function(e){return""+(e>9?e:"0"+e)};function i(e){return Object.prototype.toString.call(e)}function s(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function l(e){return void 0===e||null===e}function o(e){return"[object Array]"===i(e)}function d(e){return"[object Object]"===i(e)}function c(e){return"[object Date]"===i(e)}function u(e){return"[object Function]"===i(e)}function f(e,t){!e||!t||e.className&&-1!=e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className+=(e.className?" ":"")+t)}function h(e,t){!e||!t||e.className&&-1==e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),""))}function v(e,t){var a=t;(d(t)||o(t))&&(a=JSON.stringify(t)),console.error("["+e+"] "+a+" ")}function p(e){return e[0]}function g(e){return e[e.length-1]}function m(e){return o(e)||d(e)?o(e)?e.length<=0:d(e)?Object.keys(e).length<=0:void 0:(v("isEmpty","Expect an Object or an Array,but got "+i(e)),!1)}var y=function(){function e(e){var t=e.renderWeekOnTop,a=e.data,n=e.week;return[this.createActionBar(!t)+"  \n             "+this.createView(a,n,t)+'\n             <div class="extra-panel" style="display: none;"></div>']}return e.prototype.createActionBar=function(e){return e?"<div class=\"calendar-action-bar\">\n            <button class='calendar-action calendar-action-prev'><span>prev</span></button>\n            <button class='calendar-action calendar-action-next'><span>next</span></button>\n         </div>\n    ":""},e.prototype.createMonthDateTemplate=function(e){var t=this;return Object.keys(e).map(function(a){var n=e[a],r=n.day,i=n.date,s={key:r?a:"",text:'<div class="date">'+(i||"")+'</div><div class="placeholder"></div>',day:r||""},l=["calendar-cell","calendar-date-cell"];return r?(0===r&&l.push("calendar-cell-weekend"),6===r&&l.push("calendar-cell-weekday")):l.push("disabled","empty"),t.createNode(l.join(" "),s.key,s.text,s.day)})},e.prototype.createView=function(e,t,a){var n=this,r=e.map(function(e){return'\n                <div class="calendar-main">\n                <div class="calendar-head">\n                    <div class="calendar-title"><span class="year-name">'+e.heading.year+'</span> <span class="month-name">'+e.heading.month+"</span></div>\n                </div>\n                "+(a?"":n.createMonthWeek(t))+'\n                <div class="calendar-body">'+n.createMonthDateTemplate(e.dates).join(" ")+"</div>\n                </div>\n            "});return a&&r.unshift(this.createMonthWeek(t)),r.join("").trim()},e.prototype.createMonthWeek=function(e){return'  <div class="calendar-day">'+e.map(function(e,t){return'<div class="'+["calendar-cell","calendar-day-cell",0===t?"calendar-cell-weekday":6===t?"calendar-cell-weekend":""].join(" ")+'">'+e+"</div>"}).join("")+"</div>"},e.prototype.createNode=function(e,t,a,n){return'<div class="'+e+'"  '+(n>=0?"data-day="+n:"")+" "+(t?"data-date="+t:"")+">"+a+"</div>"},e}(),D=function(){function e(e){return console.log(e),[this.createPanel(e.years,e.title)]}return e.prototype.createPanel=function(e,t){return'<div class="year-panel">\n                \n                <div class="year-title">\n                    <span class="year-prev">prev</span>\n                    '+t+'\n                    <span class="year-next">next</span>\n                </div>\n                <div class="year-list">\n                    '+e.map(function(e){return'<div class="year-cell"><span>'+e+"</span></div>"}).join("")+"\n                </div>\n            </div>"},e}(),b=function(e,t,n,r){var i={};if(r){if(e instanceof Date)for(var s=e.getDate(),l=1;l<=s-1;l++){i[u=Y(new Date(e.getFullYear(),e.getMonth(),s-l),n)]=u}if(t instanceof Date){var o=a(t.getFullYear(),t.getMonth()),d=a(t.getFullYear(),t.getMonth()+1),c=o-t.getDate()+d;for(l=1;l<=c;l++){var u;i[u=Y(new Date(t.getFullYear(),t.getMonth(),t.getDate()+l),n)]=u}}}return i};var w=function(e,t){return e+" calendar calendar-"+(2===t?"double-views":1===t?"single-view":"flat-view")};function F(e){return e?"string"==typeof e?document.querySelector(e):e:null}var M={days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["01\u6708","02\u6708","03\u6708","04\u6708","05\u6708","06\u6708","07\u6708","08\u6708","09\u6708","10\u6708","11\u6708","12\u6708"],year:"\u5e74"};function Y(e,t){t||(t="YYYY-MM-DD"),t=t.toUpperCase();var a={YYYY:e.getFullYear(),DD:r(e.getDate()),MM:r(e.getMonth()+1),D:e.getDate(),M:e.getMonth()+1};!function(e){var t=e.split(/\W/,3);t.shift();for(var a=[],n=0;n<t.length;n++){var r=t[n];/\w\w/.test(r)&&a.push(r)}t.length,a.length}(t);return t.replace(/(?:\b|%)([dDMyY]+)(?:\b|%)/g,function(e,t){return void 0===a[t]?t:a[t]})}function S(e,t){var a,n,r;if(t||(t="YYYY-MM-DD"),!(n=(a=t).split(/\w/).filter(function(e){return!!e}),r=a.split(/\W/).map(function(e,t){var a=e.length;if(0===t)return"\\d{"+a+"}";if(1===t){if(1===a)return"(?:[1-9]?[0-9])";if(2===a)return"([0-9][0-2])"}else if(2===t){if(1===a)return"(?:[1-9]?[0-9])";if(2===a)return"[0-9][1-9]"}}).join("\\"+n.pop()),new RegExp(r)).test(e))return null;var i=function(e){if(!e)return new Date;if(e instanceof Date)return e;var t=e.split(/\W/).map(function(e){return parseInt(e)}),a=new Date(t.join(" "));return a.getTime()?new Date(a.getFullYear(),a.getMonth(),a.getDate()):null}(e);if(i)return i;var s=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,l={D:[/\d{1,2}/,function(e,t){return e.day=parseInt(t)}],M:[/\d{1,2}/,function(e,t){return e.month=parseInt(t)-1}],DD:[/\d{2}/,function(e,t){return e.day=parseInt(t)}],MM:[/\d{2}/,function(e,t){return e.month=parseInt(t)-1}],YY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}],YYYY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}]};return(i=function(e,t){if(e.length>1e3)return null;var a=!0,n={year:0,month:0,day:0};if(t.replace(s,function(t){if(l[t]){var r=l[t],i=r[0],s=r[r.length-1],o=e.search(i);~o?e.replace(r[0],function(t){return s(n,t),e=e.substr(o+t.length),t}):a=!1}return l[t]?"":t.slice(1,t.length-1)}),!a)return null;var r=new Date(n.year,n.month,n.day);return new Date(r.getFullYear(),r.getMonth(),r.getDate())})(e,t)}var j,k=function(e,t,a){a||(a="date"),t||(t=0);var n=0,r=0,i=t;return"year"===a?r=t:"month"===a&&(n=t),new Date(e.getFullYear()+r,e.getMonth()+n,e.getDate()+i)},x=(j={},{$on:function(e,t){j[e]||(j[e]=[]),j[e].push(t)},$emit:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a=[].shift.call(e),n=j[a];if(!n||0===n.length)return!1;for(var r=0,i=void 0;i=n[r++];)i.apply(this,e)},$remove:function(e,t){var a=j[e];if(!a)return!1;if(t)for(var n=a.length-1;n>=0;n--)a[n]===t&&a.splice(n,1);else a&&(a.length=0)}});return function(){function r(a){var r=this;if(this.limit=1,this.views=1,this.date=new Date,this.startDate=null,this.endDate=null,this.selected=[],this.data={},this.disables={},this.element=null,this.doubleSelect=!1,this.language=M,this.canSelectLength=1,this.format=Y,this.parse=S,a&&F(a.el)){this.element=F(a.el),this.views=function(e){if(!e)return 1;var a=t(e);return isNaN(a)?"auto"!==e?1:"auto":e>2||a<=0?1:a}(a.views),this.element.className=w(this.element.className,this.views),this.doubleSelect="[object Boolean]"===i(a.doubleSelect)&&!0===a.doubleSelect;var s=t(a.selection),y=!1;a.selection&&!isNaN(s)&&s>=2&&(this.canSelectLength=s,y=!0),this.canSelectLength>=2&&(this.doubleSelect=!1),this.dateFormat=a.format,!l(a.startDate)&&c(a.startDate)&&(this.startDate=a.startDate),!l(a.endDate)&&c(a.endDate)&&(this.endDate=a.endDate),this.limit=this.doubleSelect?isNaN(a.limit)?2:a.limit:1,y&&(this.limit=this.canSelectLength),x.$on("select",function(t){var a=t.type,n=t.value;if("disabled"===a)return!1;"selected"===a&&(r.selected=n),"switch"!==a&&x.$emit("update",t);var i=r.getRange(n);!function(t,a,n){if(n){for(var r,i,s=t.querySelectorAll(".in-range"),l=0;l<s.length;l++)h(s[l],"in-range");for(l=0;l<a.length;l++){var o=e("data-date",a[l]),d=t.querySelector(o);i="active",(r=d)&&i&&r.className&&-1!=r.className.search(new RegExp("\\b"+i+"\\b"))||f(d,"in-range")}}}(r.element,i.validDates,r.doubleSelect),function(e,t,a){for(var n=e.querySelectorAll(".calendar-date-cell"),r=0;r<n.length;r++)h(n[r],"active"),a&&(h(n[r],"start-date"),h(n[r],"end-date"));for(r=0;r<t.length;r++){var i=t[r],s=e.querySelector('[data-date="'+i+'"]');f(s,"active"),a&&(0===r&&f(s,"start-date"),2===t.length&&r===t.length-1&&f(s,"end-date"))}}(r.element,n,r.doubleSelect)}),x.$on("render",function(e){var t=r.canSelectLength>=2,a=!m(r.data);t&&(a=!1);var i=e.type;if("switch"===i){var s={year:r.date.getFullYear(),month:r.date.getMonth(),date:r.date.getDate()};r.date=new Date(s.year,s.month+e.size,s.date)}r.render(r.createMonths(r.date),"auto"===r.views);var o=r.element.querySelectorAll(".calendar-cell");r.element.querySelector(".calendar-title"),r.element.querySelector(".calendar-title .year-name"),r.element.querySelector(".calendar-title .month-name");x.$emit("select",{type:i,value:r.selected}),m(r.disables)||x.$emit("disabled",{nodeList:o,dateList:r.disables}),a&&x.$emit("data",{data:r.data,nodeList:o});for(var d=r.doubleSelect,c=r.selected,u=function(e){return!!r.disables[e]},f=r.selected,h=function(e){var i=o[e];i.addEventListener("click",function(){var e=function(e,t,a){if(void 0===a&&(a=void 0),!e)return null;var n=e.getAttribute(t);return void 0===a&&(a=""),n||e.setAttribute(t,a)}(i,"data-date");x.$emit("select",t?function(e){var t=f.indexOf(e),a=u(e);if(!e||a)return{type:"disabled",value:f};if(t>=0){for(var n=[],i=0;i<f.length;i++)f[i]!==e&&n.push(f[i]);f=n}else f.push(e);return f.length>r.limit&&(f=[e]),{type:"selected",value:f}}(e):function(e){var t="selected";if(!e)return{type:"disabled",value:[]};var i=f.indexOf(e),s=u(e),o=r.parse(e,r.dateFormat),h=new Date(o.getFullYear(),o.getMonth(),o.getDate()-1),v=u(r.format(h,r.dateFormat));if(a&&f.length<=0&&s||d&&v&&s||i>=0&&s)return{type:"disabled",value:[]};if(i>=0){var m=g(f),y=p(f);f=l(r.disables[m])?[m]:[y]}if((d&&f.length>=2||!d)&&(f=[]),f.push(e),d){if(f.length>=2){y=p(f),m=g(f);var D=n(r.parse(m,r.dateFormat),r.parse(y,r.dateFormat),"days",!1);0===D?f=[y]:D<0?(m=g(f),u(m)?f.pop():f.shift()):(r.getRange(f).invalidDates.length>0||D>r.limit)&&f.shift()}f.length<=1&&u(p(f))&&(t="disabled",f=c)}else f=s?c:f,t=s?"disabled":"selected";return{type:t,value:f}}(e))})},v=0;v<o.length;v++)h(v)}),function(e,t){void 0===t&&(t=!0);var a=window.setTimeout(function(){u(e)?(e(),t&&clearTimeout(a)):(v("nextTick","Except a function,but got "+i(e)),clearTimeout(a))},0)}(function(){var e=!m(r.data)&&!y;c(a.startDate)&&c(a.endDate)||e&&v("init","please provide [startDate] and [endDate] while binding data to datepicker"),r.date=l(r.startDate)?new Date:r.startDate;var t=[],s=[];if(!l(r.disabledTemp)){var u=r.disabledTemp,f=u.dateList,h=u.disableBefore,D=u.disableAfter,w=u.dayList;h&&(r.startDate=h),D&&(r.endDate=D),s=f,t=w,delete r.disabledTemp}if(r.disables=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a={};function n(e,t){for(var a in void 0===e&&(e={}),t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}for(var r=0;r<e.length;r++){var s=e[r];if(s)if(o(s))for(var l=0;l<s.length;l++){var u=s[l];d(u)?a=n(a,u):c(u)||(a[u]=u)}else d(s)?a=n(a,s):("[object String]"===i(s)||"[object Number]"===i(s))&&(a[s]=s)}return a}(b(r.startDate,r.endDate,r.dateFormat,e),function(e,t,a,r){var i={};if(e&&t)for(var s=n(e,t,"days",!0),l=0;l<s;l++){var o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+l),d=o.getDay();if(~a.indexOf(d)){var c=Y(o,r);i[c]=c}}return i}(r.startDate,r.endDate,t,r.dateFormat),function(e){for(var t={},a=0,n=e;a<n.length;a++){var r=n[a];t[r]=r}return t}(s)),e){var F=r.data;r.endDate=r.parse(g(Object.keys(F)),r.dateFormat);for(var M=n(r.startDate,r.endDate,"days",!0),S=0;S<M;S++){var j=k(r.startDate,S),N=r.format(j,r.dateFormat);l(F[N])?r.disables[N]=N:l(r.disables[N])||delete F[N]}r.data=F}var O=p(r.selected),L=g(r.selected),T=r.getRange(r.selected);(T.invalidDates.length>0||T.outOfRange||r.doubleSelect&&O&&O===L&&L)&&(T.outOfRange?v("setDates","["+r.selected+"] out of limit:"+r.limit):v("setDates","Illegal dates ["+r.selected+"]"),r.selected=[]),"auto"===r.views&&(m(r.selected)||(r.date=r.parse(p(r.selected),r.dateFormat)),l(r.startDate)&&(r.startDate=r.date),l(r.endDate)&&(r.endDate=k(r.date,6,"month"))),1===r.views&&r.doubleSelect&&r.selected.length>=2&&O===L&&r.selected.pop(),x.$emit("render",{type:"init"})})}}return r.prototype.on=function(e,t){return x.$on(e,t)},r.prototype.setDates=function(e){if(o(e)){var t=[],a="",n="";if(this.doubleSelect){e.length>2&&(e=e.slice(0,2)),a=e[0],n=e[e.length-1];var r=c(a)?a:this.parse(a,this.dateFormat),i=c(n)?n:this.parse(n,this.dateFormat);t=[this.format(r,this.dateFormat)],a!==n&&t.push(this.format(i,this.dateFormat))}else{var s=e[e.length-1];t=[c(s)?this.format(s,this.dateFormat):s]}this.selected=t}},r.prototype.setLanguage=function(e){o(e.days)&&o(e.months)&&(this.language={days:e.days,months:e.months,year:e.year})},r.prototype.setDisabled=function(e){var a=this,n=s({dates:"[optional]Expect an array of string or Date got "+s(e.dates)+" ",days:"[optional]Expect an array of number,got "+s(e.days),from:"[optional]Expect a string or Date ,got "+s(e.to),to:"[optional]Expect a string or Date ,got "+s(e.to)});if(!e||d(e)&&Object.keys(e).length<=0)return v("setDisabled",n),!1;if(e.dates&&!o(e.dates)||e.days&&!o(e.days))return v("setDisabled",n),!1;var r,i,l=o(e.dates)?e.dates.map(function(e){return e instanceof Date?a.format(e,a.dateFormat):a.parse(e,a.dateFormat)instanceof Date?e:void 0}).filter(function(e){return!!e}):[],u=e.to,f=e.from;if(f){if(c(f))r=f;else{if(!c(h=this.parse(f,this.dateFormat)))return v("setDisabled","invalid param,"+s({from:f})),!1;r=h}r=k(r)}if(u){if(c(u))i=u;else{var h;if(!c(h=this.parse(u,this.dateFormat)))return v("setDisabled","invalid param,"+s({to:u})),!1;i=h}i=k(i)}var p=o(e.days)?e.days.filter(function(e){var a=t(e);return!isNaN(a)&&a>=0&&a<=6}):[];Object.defineProperty(this,"disabledTemp",{configurable:!0,writable:!0,enumerable:!0,value:{dayList:p,dateList:l,disableAfter:r,disableBefore:i}})},r.prototype.setData=function(e){if(u(e)&&this.canSelectLength<=1){var t=e();if(d(t)&&Object.keys(t).length>0){var a={};for(var n in t){this.parse(n,this.dateFormat)instanceof Date&&(a[n]=t[n])}this.data=a}else{v("setData","you are passing wrong type of data to DatePicker,data should be like :\n          \n                    {"+(n=this.format(new Date,this.dateFormat))+':"value"}')}}},r.prototype.createMonths=function(e){for(var t=this,r=2==this.views?1:"auto"===this.views?n(this.endDate,this.startDate):0,i=[],s=0;s<=r;s++){var l=new Date(e.getFullYear(),e.getMonth()+s,1),o=a(l.getFullYear(),l.getMonth());i.push({dates:o,year:l.getFullYear(),month:l.getMonth()})}return i.map(function(e){for(var a,n,r,i={},s=new Date(e.year,e.month,1),l=new Date(e.year,e.month,0).getDate(),o=0;o<s.getDay();o++){var d=new Date(e.year,e.month-1,l-o);i[t.format(d,t.dateFormat)]={date:!1,day:!1}}for(o=0;o<e.dates;o++){var c=new Date(e.year,e.month,o+1);i[t.format(c,t.dateFormat)]={date:""+c.getDate(),day:""+c.getDay()}}return{heading:(a=t.language,n=e.year,r=e.month,a.year?{year:""+n+a.year,month:""+a.months[r]}:{year:""+n,month:""+a.months[r]}),dates:i}})},r.prototype.render=function(e,t){var a=new y({renderWeekOnTop:t,data:e,week:this.language.days});this.element.innerHTML=a[0];var r=this.element.querySelector(".calendar-action-prev"),i=this.element.querySelector(".calendar-action-next");if(r&&i){var s=this.endDate?n(this.endDate,this.date):1;(this.endDate?n(this.date,this.startDate):2)>=1?r.addEventListener("click",function(){x.$emit("render",{type:"switch",size:-1}),h(i,"disabled calendar-action-disabled")}):f(r,"disabled calendar-action-disabled"),s>=1?i.addEventListener("click",function(){x.$emit("render",{type:"switch",size:1}),h(r,"disabled calendar-action-disabled")}):f(i,"disabled calendar-action-disabled")}},r.prototype.renderYearPanel=function(e){var t=e[0]+"~"+e[e.length-1];new D({years:e,title:t}),this.element.querySelector(".year-prev"),this.element.querySelector(".year-next")},r.prototype.renderMonthPanel=function(){},r.prototype.getRange=function(e){var t=p(e),a=g(e),r=[],i=[],s=this.limit,l=!1;if(t&&a){var o=void 0;o=c(t)?t:this.parse(t,this.dateFormat);var d=n(c(a)?a:this.parse(a,this.dateFormat),o,"days");if(d<=s)for(var u=0;u<d;u++){var f=k(o,u),h=this.format(f,this.dateFormat);this.disables[h]?r.push(h):i.push(h)}else l=!0}return{invalidDates:r,validDates:i,outOfRange:l}},r}()});
  