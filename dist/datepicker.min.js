  /*
   *  TypePicker v1.6.5
   *  Fi2zz / wenjingbiao@outlook.com
   *  https://github.com/Fi2zz/datepicker
   *  (c) 2017-2018, wenjingbiao@outlook.com
   *  MIT License
  */
  
  
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DatePicker=t()}(this,function(){"use strict";var e,t=(e={},{$on:function(t,a){e[t]||(e[t]=[]),e[t].push(a)},$emit:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=[].shift.call(t),r=e[n];if(!r||0===r.length)return!1;for(var i=0,s=void 0;s=r[i++];)s.apply(this,t)},$remove:function(t,a){var n=e[t];if(!n)return!1;if(a)for(var r=n.length-1;r>=0;r--)n[r]===a&&n.splice(r,1);else n&&(n.length=0)}}),a=function(e,t){return"["+e+'="'+t+'"]'};function n(e){return parseInt(e,10)}var r=/firefox/i.test(window.navigator.userAgent);function i(e,t){var a=new Date(e,t,1),n=Date.UTC(a.getFullYear(),a.getMonth()+1,0);return new Date(n).getUTCDate()}function s(e,t,a){if(void 0===a&&(a=void 0),!e)return null;var n=e.getAttribute(t);return void 0===a&&(a=""),n||e.setAttribute(t,a)}function l(e,t,a,n){var r;if(void 0===a&&(a="month"),!p(e)||!p(t))return 0;if("month"===a)r=Math.abs(12*e.getFullYear()+e.getMonth())-(12*t.getFullYear()+t.getMonth());else if("days"===a){var i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=Math.round(i-s)/864e5;r=n?Math.abs(l):l}return r}var o=function(e){return""+(e>9?e:"0"+e)};function d(e){return Object.prototype.toString.call(e)}function u(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function c(e){return void 0===e||null===e}function f(e){return"[object String]"===d(e)}function h(e){return"[object Array]"===d(e)}function v(e){return"[object Object]"===d(e)}function g(e){return"[object Number]"===d(e)}function p(e){return"[object Date]"===d(e)}function D(e){return"[object Function]"===d(e)}function m(e,t){!e||!t||e.className&&-1!=e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className+=(e.className?" ":"")+t)}function y(e,t){!e||!t||e.className&&-1==e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),""))}function b(e,t){var a=t;(v(t)||h(t))&&(a=JSON.stringify(t)),console.error("["+e+"] "+a+" ")}function w(e){return e[0]}function M(e){return e[e.length-1]}function Y(e){return h(e)||v(e)?h(e)?e.length<=0:v(e)?Object.keys(e).length<=0:void 0:(b("isEmpty","Expect an Object or an Array,but got "+d(e)),!1)}var S=function(){function e(e){var t=e.renderWeekOnTop,a=e.data,n=e.week;return[this.createActionBar(!t)+"  \n       "+this.createView(a,n,t)]}return e.prototype.createActionBar=function(e){return e?"<div class=\"calendar-action-bar\">\n            <button class='calendar-action calendar-action-prev'><span>prev</span></button>\n            <button class='calendar-action calendar-action-next'><span>next</span></button>\n         </div>\n    ":""},e.prototype.createMonthDateTemplate=function(e){var t=this;return Object.keys(e).map(function(a){var n=e[a],r=n.day,i=n.date,s={key:r?a:"",text:'<div class="date">'+(i||"")+'</div><div class="placeholder"></div>',day:r||""},l=["calendar-cell","calendar-date-cell"];return r?(0===r&&l.push("calendar-cell-weekend"),6===r&&l.push("calendar-cell-weekday")):l.push("disabled","empty"),t.createNode(l.join(" "),s.key,s.text,s.day)})},e.prototype.createView=function(e,t,a){var n=this,r=e.map(function(e){return'\n                <div class="calendar-main">\n                <div class="calendar-head">\n                    <div class="calendar-title">'+e.heading+"</div>\n                </div>\n                "+(a?"":n.createMonthWeek(t))+'\n                <div class="calendar-body">'+n.createMonthDateTemplate(e.dates).join(" ")+"</div>\n                </div>\n            "});return a&&r.unshift(this.createMonthWeek(t)),r.join("").trim()},e.prototype.createMonthWeek=function(e){return'  <div class="calendar-day">'+e.map(function(e,t){return'<div class="'+["calendar-cell","calendar-day-cell",0===t?"calendar-cell-weekday":6===t?"calendar-cell-weekend":""].join(" ")+'">'+e+"</div>"}).join("")+"</div>"},e.prototype.createNode=function(e,t,a,n){return'<div class="'+e+'"  '+(n>=0?"data-day="+n:"")+" "+(t?"data-date="+t:"")+">"+a+"</div>"},e}(),F=/\d{2,4}(\W{1})\d{1,2}(\W{1})\d{1,2}/;function x(e,t){t||(t="YYYY-MM-DD"),t=t.toUpperCase();var a={YYYY:e.getFullYear(),DD:o(e.getDate()),MM:o(e.getMonth()+1),D:e.getDate(),M:e.getMonth()+1},n=function(e){var t=e.split(/\W/,3);t.shift();for(var a=[],n=0;n<t.length;n++){var r=t[n];/\w\w/.test(r)&&a.push(r)}return t.length===a.length}(t);return{origin:e,date:n?a.DD:a.D,month:n?a.MM:a.M,year:a.YYYY,day:e.getDay(),value:t.replace(/(?:\b|%)([dDMyY]+)(?:\b|%)/g,function(e,t){return void 0===a[t]?t:a[t]})}}function k(e,t){t||(t="YYYY-MM-DD");var a=function(e){for(var t=e.split(/\w/).filter(function(e){return e}),a=e.split(/\W/).map(function(e){return"\\d{1,"+(e.length+1)+"}"}).join("^"),n=0;n<t.length;n++){var r=t[n];a=a.replace(/\^/,r)}return new RegExp(a)}(t);if(!F.test(e)||!a.test(e))return null;var n=function(e){if(!e)return new Date;if(e instanceof Date)return e;var t=new Date(e);return t.getTime()?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null}(e);if(n)return n;var r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i={D:[/\d{1,2}/,function(e,t){return e.day=parseInt(t)}],M:[/\d{1,2}/,function(e,t){return e.month=parseInt(t)-1}],DD:[/\d{2}/,function(e,t){return e.day=parseInt(t)}],MM:[/\d{2}/,function(e,t){return e.month=parseInt(t)-1}],YY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}],YYYY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}]};return(n=function(e,t){if(e.length>1e3)return null;var a=!0,n={year:0,month:0,day:0};if(t.replace(r,function(t){if(i[t]){var r=i[t],s=r[0],l=r[r.length-1],o=e.search(s);~o?e.replace(r[0],function(t){return l(n,t),e=e.substr(o+t.length),t}):a=!1}return i[t]?"":t.slice(1,t.length-1)}),!a)return null;var s=new Date(n.year,n.month,n.day);return new Date(s.getFullYear(),s.getMonth(),s.getDate())})(e,t)}var N=function(e,t){t||(t=0);var a=p(e)?e:new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate()+t)};var j=function(e,t){return e+" calendar calendar-"+(2===t?"double-views":t>2?"multi-views":1===t?"single-view":"flat-view")};var O={days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["01\u6708","02\u6708","03\u6708","04\u6708","05\u6708","06\u6708","07\u6708","08\u6708","09\u6708","10\u6708","11\u6708","12\u6708"],year:"\u5e74"};return function(){function e(e){var i,o=this;if(this.limit=1,this.views=1,this.date=new Date,this.startDate=null,this.endDate=null,this.selected=[],this.data={},this.disables={},this.element=null,this.doubleSelect=!1,this.disableDays=[],this.language=O,this.canSelectLength=1,this.format=function(e,t){return x(e,t||o.dateFormat)},this.parse=function(e,t){return k(e,t||o.dateFormat)},e)if(this.element=(i=e.el)?f(i)?i.indexOf("#")>=0?document.querySelector(i):i.indexOf(".")>=0?document.querySelectorAll(i)[0]:i.indexOf("#")<=-1||i.indexOf(".")<=-1?(b("ParseEl","Do not mount DatePicker to a pure html tag,"+i),!1):document.querySelector(i):i:null,this.element){this.views=function(e){if(!e)return 1;var t=n(e);return isNaN(t)?"auto"!==e?1:"auto":e>2||t<=0?1:t}(e.views),this.element.className=j(this.element.className,this.views);var d=function(e){var t=w(e),a=M(e),n=[],i=[];if(t&&a){var s=void 0;s=p(t)?t:o.parse(t,o.dateFormat);var d=l(p(a)?a:o.parse(a,o.dateFormat),s,"days");if(d<=o.limit)if(r)for(var u=1;u<=d;u++){var c=new Date(s.getFullYear(),s.getMonth(),s.getDate()+u),f=o.format(c).value;o.disables[f]?n.push(f):i.push(f)}else for(u=0;u<d;u++){c=new Date(s.getFullYear(),s.getMonth(),s.getDate()+u),f=o.format(c).value;o.disables[f]?n.push(f):i.push(f)}}return{invalidDates:n,validDates:i}};t.$on("setData",function(e){return o.data=e}),t.$on("select",function(e){var n=e.type,r=e.value;if("disabled"===n)return!1;"selected"===n&&(o.selected=r),"switch"!==n&&t.$emit("update",e);var i=d(r);!function(e,t,n){if(n){for(var r,i,s=e.querySelectorAll(".in-range"),l=0;l<s.length;l++)y(s[l],"in-range");for(l=0;l<t.length;l++){var o=a("data-date",t[l]),d=e.querySelector(o);i="active",(r=d)&&i&&r.className&&-1!=r.className.search(new RegExp("\\b"+i+"\\b"))||m(d,"in-range")}}}(o.element,i.validDates,o.doubleSelect),function(e,t,a){for(var n=e.querySelectorAll(".calendar-date-cell"),r=0;r<n.length;r++)y(n[r],"active"),a&&(y(n[r],"start-date"),y(n[r],"end-date"));for(r=0;r<t.length;r++){var i=t[r],s=e.querySelector('[data-date="'+i+'"]');m(s,"active"),a&&(0===r&&m(s,"start-date"),2===t.length&&r===t.length-1&&m(s,"end-date"))}}(o.element,r,o.doubleSelect)}),t.$on("render",function(e){var a=o.canSelectLength>=2,r=!Y(o.data);a&&(r=!1);var i=e.type;if("switch"===i){var u={year:o.date.getFullYear(),month:o.date.getMonth(),date:o.date.getDate()};o.date=new Date(u.year,u.month+e.size,u.date)}o.render(o.createMonths(o.date),"auto"===o.views);var f=o.element.querySelectorAll(".calendar-cell");if(!Y(o.disableDays)&&(c(o.endDate)||c(o.startDate)))for(var h=o.disableDays,v=0;v<f.length;v++){var g=f[v],p=n(s(g,"data-day")),D=s(g,"data-date");!isNaN(p)&&h.indexOf(p)>=0&&(o.disables[D]=D)}t.$emit("select",{type:i,value:o.selected}),r&&t.$emit("data",{data:o.data,nodeList:f}),Y(o.disables)||t.$emit("disabled",{nodeList:f,dateList:o.disables});var m=o.doubleSelect,y=o.selected,b=function(e){return!!o.disables[e]},S=o.selected,F=function(e){var n=f[e];n.addEventListener("click",function(){return t.$emit("select",a?function(e){var t=s(e,"data-date"),a=S.indexOf(t),n=b(t);if(!t||n)return{type:"disabled",value:S};if(a>=0){for(var r=[],i=0;i<S.length;i++)S[i]!==t&&r.push(S[i]);S=r}else S.push(t);return S.length>o.limit&&(S=[t]),{type:"selected",value:S}}(n):function(e){var t="selected",a=s(e,"data-date");if(!a)return{type:"disabled",value:[]};var n=S.indexOf(a),i=b(a),u=o.parse(a),f=new Date(u.getFullYear(),u.getMonth(),u.getDate()-1),h=b(o.format(f).value);if(r&&S.length<=0&&i||m&&h&&i||n>=0&&i)return{type:"disabled",value:[]};if(n>=0){var v=M(S),g=w(S);S=c(o.disables[v])?[v]:[g]}if((m&&S.length>=2||!m)&&(S=[]),S.push(a),m){if(S.length>=2){g=w(S),v=M(S);var p=l(o.parse(v),o.parse(g),"days",!1);0===p?S=[g]:p<0?(v=M(S),b(v)?S.pop():S.shift()):(d(S).invalidDates.length>0||p>o.limit)&&S.shift()}S.length<=1&&b(w(S))&&(t="disabled",S=y)}else S=i?y:S,t=i?"disabled":"selected";return{type:t,value:S}}(n))})};for(v=0;v<f.length;v++)F(v)}),this.init(e)}else b("init","invalid selector,current selector "+this.element);else b("init","No datepicker instance option provided")}return e.prototype.on=function(e,a){return t.$on(e,a)},e.prototype.setDates=function(e){if(h(e)){var t=[],a="",n="";if(this.doubleSelect){e.length>2&&(e=e.slice(0,2)),a=e[0],n=e[e.length-1];var r=p(a)?a:this.parse(a),i=p(n)?n:this.parse(n);t=[this.format(r).value],a!==n&&t.push(this.format(i).value)}else{var s=e[e.length-1];t=[p(s)?this.format(s).value:s]}this.selected=t}else b("setDates","no dates provided,"+(e=[]))},e.prototype.setLanguage=function(e){h(e.days)&&h(e.months)&&(this.language={days:e.days,months:e.months,year:e.year})},e.prototype.setDisabled=function(e){var a=this,r=u({dates:"[optional]Expect an array of string or Date got "+u(e.dates)+" ",days:"[optional]Expect an array of number,got "+u(e.days),from:"[optional]Expect a string or Date ,got "+u(e.to),to:"[optional]Expect a string or Date ,got "+u(e.to)});if(!e||v(e)&&Object.keys(e).length<=0)return b("setDisabled",r),!1;if(e.dates&&!h(e.dates)||e.days&&!h(e.days))return b("setDisabled",r),!1;var i,s,l=h(e.dates)?e.dates.map(function(e){return e instanceof Date?a.format(e).value:a.parse(e)instanceof Date?e:void 0}).filter(function(e){return!!e}):[],o=e.to,d=e.from;if(d){if(p(d))i=d;else{if(!p(c=this.parse(d,this.dateFormat)))return b("setDisabled","invalid param,"+u({from:d})),!1;i=c}i=N(i)}if(o){if(p(o))s=o;else{var c;if(!p(c=this.parse(o,this.dateFormat)))return b("setDisabled","invalid param,"+u({to:o})),!1;s=c}s=N(s)}var f=h(e.days)?e.days.filter(function(e){var t=n(e);return!isNaN(t)&&t>=0&&t<=6}):[];t.$emit("setDisabled",{dayList:f,dateList:l,disableAfter:i,disableBefore:s})},e.prototype.setData=function(e){if(D(e)&&this.canSelectLength<=1){var a=e();if(v(a)&&Object.keys(a).length>0){var n={};for(var r in a){this.parse(r)instanceof Date&&(n[r]=a[r])}t.$emit("setData",n)}else{b("setData","you are passing wrong type of data to DatePicker,data should be like :\n          \n                    {"+(r=this.format(new Date,this.dateFormat).value)+':"value"}')}}},e.prototype.createMonths=function(e){var t=this,a=2==this.views?1:"auto"===this.views?l(this.endDate,this.startDate):0;return function(e){for(var n=[],r=0;r<=a;r++){var s=new Date(e.getFullYear(),e.getMonth()+r,1),l=i(s.getFullYear(),s.getMonth());n.push({dates:l,year:s.getFullYear(),month:s.getMonth()})}return n.map(function(e){for(var a,n,r,i={},s=new Date(e.year,e.month,1),l=new Date(e.year,e.month,0).getDate(),o=0;o<s.getDay();o++){var d=new Date(e.year,e.month-1,l-o);i[(u=t.format(d)).value]={date:!1,day:!1}}for(o=0;o<e.dates;o++){var u,c=new Date(e.year,e.month,o+1);i[(u=t.format(c)).value]={date:""+u.date,day:""+u.day}}return{heading:(a=t.language,n=e.year,r=e.month,a.year?""+n+a.year+a.months[r]:a.months[r]+" "+n),dates:i}})}(e)},e.prototype.render=function(e,a){var n=new S({renderWeekOnTop:a,data:e,week:this.language.days});this.element.innerHTML=n[0];var r=this.element.querySelector(".calendar-action-prev"),i=this.element.querySelector(".calendar-action-next");if(r&&i){var s=this.endDate?l(this.endDate,this.date):1;(this.endDate?l(this.date,this.startDate):2)>=1?r.addEventListener("click",function(){t.$emit("render",{type:"switch",size:-1}),y(i,"disabled calendar-action-disabled")}):m(r,"disabled calendar-action-disabled"),s>=1?i.addEventListener("click",function(){t.$emit("render",{type:"switch",size:1}),y(r,"disabled calendar-action-disabled")}):m(i,"disabled calendar-action-disabled")}},e.prototype.init=function(e){var a=this;this.doubleSelect="[object Boolean]"===d(e.doubleSelect)&&!0===e.doubleSelect;var r=n(e.selection),s=!1;e.selection&&!isNaN(r)&&r>=2&&(this.canSelectLength=r,s=!0),this.canSelectLength>=2&&(this.doubleSelect=!1),this.dateFormat=e.format,!c(e.startDate)&&p(e.startDate)&&(this.startDate=e.startDate),!c(e.endDate)&&p(e.endDate)&&(this.endDate=e.endDate),this.limit=this.doubleSelect?g(e.limit)?e.limit:2:1,s&&(this.limit=this.canSelectLength);var o={dateList:[],dayList:[],disableBefore:null,disableAfter:null};t.$on("setDisabled",function(e){return o=e}),function(e,t){void 0===t&&(t=!0);var a=window.setTimeout(function(){D(e)?(e(),t&&clearTimeout(a)):(b("nextTick","Except a function,but got "+d(e)),clearTimeout(a))},0)}(function(){var r=!Y(a.data)&&!s;p(e.startDate)&&p(e.endDate)||r&&b("init","please provide [startDate] and [endDate] while binding data to datepicker");var d={},u=o.dateList,D=o.dayList;if(a.disableDays=D,o.disableBefore&&(a.startDate=o.disableBefore),o.disableAfter&&(a.endDate=o.disableAfter),c(a.endDate)||c(a.startDate))for(var m=0,y=u;m<y.length;m++){d[k=y[m]]=k}else for(var S=l(a.startDate,a.endDate,"days",!0),F=0;F<=S;F++){var k=N(a.startDate,n(F)),j=a.format(k).value,O=k.getDay();u.indexOf(k)>=0&&(d[j]||(d[j]=j)),D.indexOf(O)>=0&&(d[j]||(d[j]=j)),!a.data[j]&&r&&(d[j]=j)}if(a.disables=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a={};function n(e,t){for(var a in void 0===e&&(e={}),t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}for(var r=0;r<e.length;r++){var i=e[r];if(i)if(h(i))for(var s=0;s<i.length;s++){var l=i[s];v(l)?a=n(a,l):p(l)||(a[l]=l)}else v(i)?a=n(a,i):(f(i)||g(i))&&(a[i]=i)}return a}(function(e,t,a,n){var r={};if(n){if(e instanceof Date)for(var s=e.getDate(),l=1;l<=s-1;l++)r[c=x(new Date(e.getFullYear(),e.getMonth(),s-l),a).value]=c;if(t instanceof Date){var o=i(t.getFullYear(),t.getMonth()),d=i(t.getFullYear(),t.getMonth()+1),u=o-t.getDate()+d;for(l=1;l<=u;l++){var c;r[c=x(new Date(t.getFullYear(),t.getMonth(),t.getDate()+l),a).value]=c}}}return r}(a.startDate,a.endDate,a.dateFormat,r||!c(a.startDate)||!c(a.endDate)),d),r){var L=a.data;for(var $ in a.disables)L[$]&&delete L[$];a.data=L}a.date=c(a.startDate)?new Date:a.startDate;var A=w(a.selected),E=M(a.selected);(a.disables[A]||a.disables[E]||a.doubleSelect&&A&&A===E&&E)&&(b("setDates","Illegal dates ["+a.selected+"]"),a.selected=[]),"auto"===a.views&&(Y(a.selected)||(a.date=a.parse(w(a.selected))),c(a.startDate)&&(a.startDate=a.date),c(a.endDate)&&(a.endDate=new Date(a.date.getFullYear(),a.date.getMonth()+6,a.date.getDate()))),1===a.views&&a.doubleSelect&&a.selected.length>=2&&A===E&&a.selected.pop(),t.$emit("render",{type:"init"})})},e}()});
  