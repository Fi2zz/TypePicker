!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DatePicker=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}var a=t(function(e,t){t.__esModule=!0,t.default=function(){var e={};return{$on:function(t,a){e[t]||(e[t]=[]),e[t].push(a)},$emit:function(t,a){var n=arguments,r=this,i=[].shift.call(arguments),s=e[i];if(!s||0===s.length)return!1;for(var l=0,d=void 0;d=s[l++];)d.apply(r,n)},$remove:function(t,a){var n=e[t];if(!n)return!1;if(a)for(var r=n.length-1;r>=0;r--)n[r]===a&&n.splice(r,1);else n&&(n.length=0)}}}()});e(a);var n=t(function(e,t){function a(e){return"[object Array]"===r(e)}function n(e,t){if(1===e.length)return e;if(0===e.length)return[];for(var a=[],r=[],i=[],s=e[0],l=0;l<e.length;l++)e[l]<s?a.push(e[l]):e[l]>s?r.push(e[l]):i.push(e[l]);return t?[].concat(n(a,t),i,n(r,t)):[].concat(n(r,t),i,n(a,t))}t.__esModule=!0,t.diff=function(e,t,a){if(void 0===a&&(a="month"),"month"==a)return Math.abs(12*e.getFullYear()+e.getMonth()-(12*t.getFullYear()+t.getMonth()));if("days"===a){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return Math.round(n-r)/864e5}},t.attrSelector=function(e,t){return"["+e+'="'+t+'"]'},t.getDates=function(e,t){var a=new Date(e,t,1),n=Date.UTC(a.getFullYear(),a.getMonth()+1,0);return new Date(n).getUTCDate()},t.padding=function(e){return""+(e>9?e:"0"+e)},t.getFirstDay=function(e,t){return new Date(e,t,1).getDay()},t.getWeeksOfMonth=function(e){var t=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0),n=t.getDay()+a.getDate();return Math.ceil(n/7)},t.getLastDay=function(e,t){return new Date(e,t+1,0).getDay()},t.getLastDates=function(e){for(var a=t.getLastDay(e.getFullYear(),e.getMonth()),n=e.getDate()-a,r=[],i=0;i<=a;i++)n+i<=e.getDate()&&r.push(n+i);return r},t.inArray=function(e,t){return!(!a(e)||e.length<=0||!t)&&~e.indexOf(t)},t.attr=function(e,t,a){if(void 0===a&&(a=void 0),!e)return null;var n=e.getAttribute(t);return void 0===a&&(a=""),n||e.setAttribute(t,a)},t.remove=function(e,t){if(e.length){var a=e.indexOf(t);if(a>-1)return e.splice(a,1)}};var r=function(e){return Object.prototype.toString.call(e)};t.isBoolean=function(e){return"[object Boolean]"===r(e)},t.isArray=a,t.isObject=function(e){return"[object Object]"===r(e)},t.isNumber=function(e){return"[object Number]"===r(e)},t.isString=function(e){return"[object String]"===r(e)},t.isDate=function(e){return"[object Date]"===r(e)},t.isNil=function(e){return null===e||void 0===e||void 0===e},t.isPrimitive=function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e},t.hasClass=function(e,t){return!!e&&e.classList.contains(t)},t.removeClass=function(e,t){if(e)return e.classList.remove(t)},t.addClass=function(e,t){if(!(!e||e&&e.classList.contains(t)))return e.classList.add(t)},t.parseEl=function(e){return e?e.indexOf("#")>=0?document.querySelector(e):e.indexOf(".")>=0?document.querySelectorAll(e)[0]:~["a","p","div","section","span","article","header","footer","main","aside","i","strong","small","tr","table"].indexOf(e)?(console.error("[DatePicker Warn] do not mount datepicker to pure html tag, use class name or id instead "),null):document.querySelector(e):null},t.defaultLanguage={locale:"zh-cn",pack:{days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["01\u6708","02\u6708","03\u6708","04\u6708","05\u6708","06\u6708","07\u6708","08\u6708","09\u6708","10\u6708","11\u6708","12\u6708"],year:"\u5e74"}},t.setLanguage=function(e){var t,a=e.locale.toLowerCase(),n=e.pack,r=n.months,i=n.days;return t="en"===a||"en-us"===a||"en-gb"===a?function(e,t){return r[t]+" "+e}:function(e,t){return""+e+n.year+r[t]},{week:i,title:t}},t.getLanguage=function(e,a){return a&&e[a]?{locale:a,pack:e[a]}:t.defaultLanguage},t.quickSort=n});e(n);var r=t(function(e,t){function a(e){if(!e)return new Date;if(e instanceof Date)return e;var t=new Date(e);return t.getTime()?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null}t.__esModule=!0,t.format=function(e,t,a){void 0===a&&(a=!0);var r=!0;a||(r=!1);var i={DD:r?n.padding(e.getDate()):e.getDate(),dd:r?n.padding(e.getDate()):e.getDate(),MM:r?n.padding(e.getMonth()+1):e.getMonth()+1,mm:r?n.padding(e.getMonth()+1):e.getMonth()+1,YYYY:e.getFullYear(),D:e.getDate(),d:e.getDate(),M:e.getMonth()+1,m:e.getMonth()+1};return{origin:e,date:i.DD,month:i.MM,year:i.YYYY,day:e.getDay(),value:t.replace(/(?:\b|%)([dDMyYHhaAmsz]+|ap|AP)(?:\b|%)/g,function(e,t){return void 0===i[t]?t:i[t]})}},t.parseFormatted=function(e,t){var n=a(e);if(n)return n;var r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i={D:[/\d{1,2}/,function(e,t){return e.day=parseInt(t)}],M:[/\d{1,2}/,function(e,t){return e.month=parseInt(t)-1}],DD:[/\d{2}/,function(e,t){return e.day=parseInt(t)}],MM:[/\d{2}/,function(e,t){return e.month=parseInt(t)-1}],YY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}],YYYY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}]};return(n=function(e,t){if(e.length>1e3)return null;var a=!0,n={year:0,month:0,day:0};if(t.replace(r,function(t){if(i[t]){var r=i[t],s=r[0],l=r[r.length-1],d=e.search(s);~d?e.replace(r[0],function(t){return l(n,t),e=e.substr(d+t.length),t}):a=!1}return i[t]?"":t.slice(1,t.length-1)}),!a)return null;var s=new Date(n.year,n.month,n.day);return new Date(s.getFullYear(),s.getMonth(),s.getDate())})(e,t)}});e(r);var i=t(function(e,t){function a(e){var t=["calendar-cell","calendar-date-cell"];return e?(n.diff(e,o,"days")<0&&t.push("disabled"),0===e.getDay()&&t.push("calendar-cell-weekend"),6===e.getDay()&&t.push("calendar-cell-weekday")):t.push("disabled","empty"),t.join(" ")}function i(e,t,i,s){for(var l=[],d=new Date(e,t,1),o={year:d.getFullYear(),month:d.getMonth(),date:d.getDate(),index:d.getMonth()},u=n.getFirstDay(o.year,o.month),c=0;c<u;c++)l.push({date:"",className:a(),text:"<div class='date'></div><div class='placeholder'></div>",key:""});for(var f=1;f<=n.getDates(o.year,o.month);f++){var h=new Date(o.year,o.month,f),g=r.format(h,i,s).value,v='<div class="date">'+(s?n.padding(f):f)+'</div><div class="placeholder"></div>';l.push({date:f,className:a(h),text:v,key:g})}return{template:l.map(function(e){return'<div class="'+e.className+'"\n            '+(e.key?"data-date="+e.key:"")+">"+e.text+"</div>"}).join(" "),year:o.year,month:o.index}}function s(e,t,a,n){void 0===n&&(n=!0);for(var r=[],s=0;s<=a;s++){var l=new Date(e.getFullYear(),e.getMonth()+s,1),d=i(l.getFullYear(),l.getMonth(),t,n);r.push({template:d.template,year:d.year,month:d.month})}return r}function l(e,t){return t?"":" calendar-"+e}function d(e,t,a,n,r){var i=n.week.map(function(e,t){return'<div class="'+["calendar-cell","calendar-day-cell",0===t?"calendar-cell-weekday":6===t?"calendar-cell-weekend":""].join(" ")+'">'+e+"</div>"}).join(""),s=e.map(function(e,r){var s=e.year,d=e.month,o='<div class="calendar-title">'+n.title(s,d)+"</div>",u=e.template,c="";return t||a?c='<div class="calendar-main'+l(r,a)+'">\n                   <div class="calendar-head">'+o+'</div>  \n                   <div class="calendar-day"> '+i+'</div>\n                    <div class="calendar-body">'+u+"</div>\n            </div>":c+="<div class='calendar-main calendar-"+r+'\'>\n                    <div class="calendar-head">'+o+'</div>\n                    <div class="calendar-body">'+u+"</div>\n              </div>",c});return t||a||s.unshift('<div class="calendar-day">'+i+"</div>"),s.join("")}t.__esModule=!0;var o=new Date;t.default=function(e,t,a,r,i,l,o){var u="calendar-"+(r?"double-views":i?"single-view":"flat-view"),c=d(s(e,a,r?1:i?0:n.diff(e,t),o),r,i,l,o);return'<div class="calendar '+u+'"> '+(r||i?"\n         <div class=\"calendar-action-bar\">\n            <button class='calendar-action calendar-action-prev'><span>prev</span></button>\n            <button class='calendar-action calendar-action-next'><span>next</span></button>\n         </div>\n        ":"")+c+"</div>"}});e(i);var s=t(function(e,t){function a(e,t,a){for(var r=[],i=0;i<e.length;i++){var s=n.attr(e[i],"data-date");s&&r.push(s)}for(var l=-1,d=-1,i=0;i<r.length;i++){var o=r[i];o===t?l=i:o===a&&(d=i)}return d===l||d<0?[]:r.slice(l+1,d)}function r(e,t,a,r){for(var i=function(e){return n.inArray(t,e)},s=[],d=a[0],o=a[a.length-1],u=0;u<e.length;u++){var c=e[u],f=e[u+1];if(a.length>0){var h=n.attr(e[u],"data-date");h===d?n.addClass(c,"start-date"):h===o&&n.addClass(c,"end-date")}else if(c&&f){var g=n.attr(c,"data-date"),v=n.attr(f,"data-date");if(g&&v){var m=r(g);n.diff(m,l,"days")>=0&&(i(v)&&i(g)||i(g)&&!i(v))&&s.length<2&&(n.addClass(c,"start-date"),n.addClass(f,"end-date"),s.push(g,v))}}}return a.length>0&&(s=a),s}function i(e,t,a,r){if(a)for(var i=t.querySelectorAll(".in-range"),s=0;s<i.length;s++)n.removeClass(i[s],"in-range");else for(s=0;s<e.length;s++){var l=n.attrSelector("data-date",e[s]),d=t.querySelector(l);n.hasClass(d,"active")||n.addClass(d,"in-range")}if(r)return[]}t.__esModule=!0;var s=new Date,l=new Date(s.getFullYear(),s.getMonth(),s.getDate());t.ranged=i,t.setDefaultRange=function(e,t,s,l,d,o,u){function c(e){return~l.indexOf(e)}var f=[];if(d){if(s.length>=2){var h=s[0],g=s[s.length-1];c(h)||(s=[]);for(var v=o(h),m=o(g),D=v.getFullYear(),p=v.getMonth(),y=v.getDate(),w=[],b=n.diff(m,v,"days")+1,M=0;M<b;M++){var Y=u(new Date(D,p,y+M)).value;c(Y)||w.push(Y)}w.length>=2&&(s=[])}var C=a(t,(f=r(t,l,s,o))[0],f[f.length-1]);C.length>0&&i(C,e,!1)}else f=s;for(M=0;M<f.length;M++){var S=n.attrSelector("data-date",f[M]),k=e.querySelector(S);n.addClass(k,"active")}return f}});e(s);var l=t(function(e,t){t.__esModule=!0,t.monthSwitch=function(e,t){var a={year:this.date.getFullYear(),month:this.date.getMonth(),date:this.date.getDate()},n=a.month+e;this.defaultDates.length>0&&(this.selected=this.defaultDates),this.date=new Date(a.year,n,a.date),this.createDatePicker(t,!1),this.pickDate(),this.dataRenderer(this.data)},t.createDatePicker=function(e,t){var a=this;if(!this.element)return console.error("[Calendar Warn] invalid selector,current selector "+this.element),!1;this.element.innerHTML=i.default(this.date,this.endDate,this.dateFormat,this.multiViews,this.flatView,n.setLanguage(e),this.zeroPadding),this.bindMonthSwitch(e);var r=setTimeout(function(){var e=a.defaultDates.length>0?a.defaultDates:a.double?a.selected:[a.format(a.date).value];a.selected=s.setDefaultRange(a.element,a.element.querySelectorAll(".calendar-date-cell:not(.empty)"),e,a.dates,a.double,a.parse,a.format);var n={type:"init",value:a.selected};t&&a.update(n),clearTimeout(r)},0)},t.bindMonthSwitch=function(e){var t=this,a=this.startDate.getTime(),r=this.date.getTime(),i=this.element.querySelector(".calendar-action-prev"),s=this.element.querySelector(".calendar-action-next");i&&s&&(n.diff(this.date,this.endDate)>=2?s.addEventListener("click",function(){t.monthSwitch(1,e),n.removeClass(i,"disabled"),n.removeClass(i,"calendar-action-disabled")}):(n.addClass(s,"disabled"),n.addClass(s,"calendar-action-disabled")),r>a?i.addEventListener("click",function(){t.monthSwitch(-1,e),n.removeClass(s,"disabled"),n.removeClass(s,"calendar-action-disabled")}):(n.addClass(i,"disabled"),n.addClass(i,"calendar-action-disabled")))},t.init=function(e,t){var a=this;if(e.format&&(this.dateFormat=e.format||"YYYY-MM-DD"),!e.multiViews&&e.flatView&&(this.multiViews=!1,this.flatView=!0),(e.flatView&&e.multiViews||!e.flatView&&e.multiViews)&&(this.flatView=!1,this.multiViews=!0),e.flatView||e.multiViews||(this.flatView=!1,this.multiViews=!1),this.double=!!n.isBoolean(e.doubleSelect)&&e.doubleSelect,this.startDate=n.isDate(e.from)?e.from:new Date,this.date=this.startDate,this.endDate=n.isDate(e.to)?e.to:new Date(this.date.getFullYear(),this.date.getMonth()+6,this.date.getDate()),this.limit=this.double&&n.isNumber(e.limit)?e.limit:1,this.flatView){var r=this.endDate.getFullYear(),i=this.endDate.getMonth(),s=this.endDate.getDate();this.endDate=new Date(r,i+1,s)}if(this.zeroPadding=!!e.zeroPadding,!t.dates||t.dates&&t.dates.length<=0){for(var l=new Date,d=n.diff(this.endDate,l,"days"),r=l.getFullYear(),i=l.getMonth(),s=l.getDate(),o=[],u=0;u<d;u++){var c=new Date(r,i,s+u),f=a.format(c).value;o.push(f)}this.data={},this.dates=o}else this.dates=t.dates,this.data=t.data;var h=n.getLanguage(e.language,e.defaultLanguage);this.element=n.parseEl(e.el),this.createDatePicker(h,!0),this.pickDate()}});e(l);var d=t(function(e,t){function a(e,t,a){if(a){for(var r=t.querySelectorAll(".active"),i=0;i<r.length;i++)n.removeClass(r[i],"active");n.hasClass(e,"disabled")||n.addClass(e,"active")}}function r(e,t,a,r,i,s){var l={start:e.querySelector(".start-date"),end:e.querySelector(".end-date")},d={start:e.querySelector(n.attrSelector("data-date",t)),end:e.querySelector(n.attrSelector("data-date",a))};return 0===r?!n.hasClass(d.start,"disabled")&&(n.removeClass(l.start,"start-date"),n.removeClass(l.start,"active"),n.removeClass(l.end,"end-date"),n.removeClass(l.end,"active"),n.addClass(d.start,"active"),n.addClass(d.start,"start-date"),!0):(n.addClass(d.end,"active"),r>0?i?(n.addClass(d.end,"start-date"),n.removeClass(l.start,"start-date"),n.removeClass(l.start,"active")):s?n.addClass(d.end,"end-date"):(n.removeClass(d.start,"active"),n.removeClass(d.start,"start-date"),n.addClass(d.end,"start-date")):r<0&&(n.removeClass(d.start,"active"),n.removeClass(d.start,"start-date"),n.addClass(d.end,"start-date")),!0)}function i(e,t){var a=n.diff(e,t,"days");return 0===a?0:-1*a}function l(e,t,a,r,s,l,d){function o(e){return n.inArray(s,e)}var u=[],c=[],f=t[0],h=t[t.length-1],g=d(f),v=i(g,d(h)),m=t.length;if(m>=2)if(v<=0)o(e)?t.shift():t=[t[0]];else if(o(h))for(var D=g.getFullYear(),p=g.getMonth(),y=g.getDate(),w=1;w<v;w++){var b=l(V=new Date(D,p,y+w)).value;o(b)&&c.push(b),u.push(b)}else o()&&h&&(t.shift(),u.push(h));else if(1===m){var M=t[t.length-1];t=o(M)?[M]:a}else t=a;var Y=u.length===c.length;if(Y||(t=[t[t.length-1]]),2===t.length){var C=null,S=d(t[t.length-1]),k=d(t[0]),F=-1*i(S,k);if(F>0){var D=k.getFullYear(),p=k.getMonth(),x=k.getDate();u=[],c=[];for(w=0;w<F;w++){var V=new Date(D,p,x+w),L=l(V).value;o(L)&&(C=V,c.push(L)),~u.indexOf(L)||u.push(L)}var _=i(C,S);1===_||-1===_?Y=!0:(u=[],t=[t[0]],Y=!1)}if(c.length===u.length?Y=!0:(Y=!1,t=[t[0]]),u.length>r){Y=!1;var j=t[t.length-1];t=o(j)?[j]:[a[0]]}}return{selected:t,allValid:Y,range:u}}t.__esModule=!0,t.default=function(e,t,d,o,u,c,f,h,g){for(var v=e.querySelectorAll(".calendar-date-cell"),m=0;m<v.length;m++)!function(m){var D=v[m];D.addEventListener("click",function(v){var m=t,p=n.attr(D,"data-date"),y=t.indexOf(p);if(!p||y>=0||t.length<=0&&!h(p))return!1;if((d&&t.length>=2||!d)&&(t=[]),t.push(p),d){var w=l(p,t,m,f,o,c,u);t=w.selected;var b=w.range,M=w.allValid,Y=t[0],C=t[t.length-1],S=i(u(Y),u(C)),k=r(e,Y,C,S,S>f,M);k&&s.ranged([],e,!0),M&&k&&s.ranged(b,e,!1)}else{var F=D,x=!0;h(p)||(t=m,x=!1),a(F,e,x)}g({type:"selected",value:t})})}(m)}});return e(d),e(t(function(e,t){t.__esModule=!0;var i=function(){function e(e){var t=this;return this.init=l.init,this.date=new Date,this.limit=1,this.double=!1,this.element=null,this.startDate=new Date,this.endDate=null,this.selected=[],this.flatView=!1,this.multiViews=!1,this.monthSwitch=l.monthSwitch,this.createDatePicker=l.createDatePicker,this.zeroPadding=!0,this.pickDate=function(){return d.default(t.element,t.selected,t.double,t.dates,t.parse,t.format,t.limit,t.inDates,t.update)},this.format=function(e,a){return r.format(e,t.dateFormat,t.zeroPadding)},this.parse=function(e){return r.parseFormatted(e,t.dateFormat)},this.inDates=function(e){return!!~t.dates.indexOf(e)},this.update=function(e){"selected"===e.type&&t.dateRanges(e.value),a.default.$emit("update",e)},this.dataRenderer=function(e){Object.keys(e).length<=0?a.default.$remove("data"):a.default.$emit("data",{data:e,nodeList:t.element.querySelectorAll(".calendar-date-cell")})},this.dateRanges=function(e){var a=[];if(!n.isArray(e))return e=[],void console.error("[dateRanges error] no dates provided",e);if(t.double){e.length>2&&(e=e.slice(0,2));var r=e[0],i=e[e.length-1],s=n.isDate(r)?r:t.parse(r),l=n.isDate(i)?i:t.parse(i);if(!n.isDate(s)||!n.isDate(l))return void console.error("[dateRanges error] illegal dates,",e);var d=n.diff(s,l,"days");d=0!==d?-1*d:d;var o=n.diff(l,s,"days");if(o=0!==o?-1*o:d,t.limit||(t.limit=2),d<0||o>t.limit||o<-1*t.limit)return void console.error("[dateRanges error] illegal start date or end date or out of limit,your selected dates:["+e+"],limit:["+t.limit+"]")}else e=[e[e.length-1]];for(var u=0;u<e.length;u++){var c=e[u];a.push(n.isDate(c)?t.format(c).value:c)}t.defaultDates=a},this.bindMonthSwitch=l.bindMonthSwitch,this.defaultDates=[],e.bindData||this.init(e,{}),{on:a.default.$on,data:function(a){return t._bindDataInit(e,a)},diff:function(e,t){return n.diff(e,t,"days")},parse:this.parse,format:this.format,dateRanges:this.dateRanges,setDefaultDates:this.dateRanges}}return e.prototype._bindDataInit=function(e,t){var a=this;if(e.bindData){var r={dates:[],data:{},from:Date,to:Date},i=t&&t(r),s=i||r;n.isDate(r.from)&&(e.from=r.from),n.isDate(r.to)&&(e.to=r.to);var l={data:s.data,dates:s.dates.sort(function(e,t){return a.parse(e)-a.parse(t)})};this.init(e,l),function(e){return!n.isObject(e)||Object.keys(e.data).length<=0||e.dates.length<=0}(s)||this.dataRenderer(s.data)}},e}();t.default=i}))});