!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.DatePicker=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}var a=e(function(t,e){e.__esModule=!0;var a=function(){var t={};return{$on:function(e,a){t[e]||(t[e]=[]),t[e].push(a)},$emit:function(e,a){var n=arguments,r=this,i=[].shift.call(arguments),s=t[i];if(!s||0===s.length)return!1;for(var l=0,d=void 0;d=s[l++];)d.apply(r,n)},$remove:function(e,a){var n=t[e];if(!n)return!1;if(a)for(var r=n.length-1;r>=0;r--)n[r]===a&&n.splice(r,1);else n&&(n.length=0)}}}();e.default=a});t(a);var n=e(function(t,e){function a(t){return"[object Array]"===r(t)}function n(t,e){if(1===t.length)return t;if(0===t.length)return[];for(var a=[],r=[],i=[],s=t[0],l=0;l<t.length;l++)t[l]<s?a.push(t[l]):t[l]>s?r.push(t[l]):i.push(t[l]);return e?[].concat(n(a,e),i,n(r,e)):[].concat(n(r,e),i,n(a,e))}e.__esModule=!0,e.diff=function(t,e,a){if(void 0===a&&(a="month"),"month"==a)return Math.abs(12*t.getFullYear()+t.getMonth()-(12*e.getFullYear()+e.getMonth()));if("days"===a){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Math.round(n-r)/864e5}},e.attrSelector=function(t,e){return"["+t+'="'+e+'"]'},e.getDates=function(t,e){var a=new Date(t,e,1),n=Date.UTC(a.getFullYear(),a.getMonth()+1,0);return new Date(n).getUTCDate()},e.padding=function(t){return""+(t>9?t:"0"+t)},e.getFirstDay=function(t,e){return new Date(t,e,1).getDay()},e.getWeeksOfMonth=function(t){var e=new Date(t.getFullYear(),t.getMonth()-1,1),a=new Date(t.getFullYear(),t.getMonth(),0),n=e.getDay()+a.getDate();return Math.ceil(n/7)},e.getLastDay=function(t,e){return new Date(t,e+1,0).getDay()},e.getLastDates=function(t){for(var a=e.getLastDay(t.getFullYear(),t.getMonth()),n=t.getDate()-a,r=[],i=0;i<=a;i++)n+i<=t.getDate()&&r.push(n+i);return r},e.inArray=function(t,e){return!(!a(t)||t.length<=0||!e)&&~t.indexOf(e)},e.attr=function(t,e,a){if(void 0===a&&(a=void 0),!t)return null;var n=t.getAttribute(e);return void 0===a&&(a=""),n||t.setAttribute(e,a)},e.remove=function(t,e){if(t.length){var a=t.indexOf(e);if(a>-1)return t.splice(a,1)}};var r=function(t){return Object.prototype.toString.call(t)};e.isBoolean=function(t){return"[object Boolean]"===r(t)},e.isArray=a,e.isObject=function(t){return"[object Object]"===r(t)},e.isNumber=function(t){return"[object Number]"===r(t)},e.isString=function(t){return"[object String]"===r(t)},e.isDate=function(t){return"[object Date]"===r(t)},e.isNil=function(t){return null===t||void 0===t||void 0===t},e.isPrimitive=function(t){return"string"==typeof t||"number"==typeof t||"boolean"==typeof t},e.hasClass=function(t,e){return!!t&&t.classList.contains(e)},e.removeClass=function(t,e){if(t)return t.classList.remove(e)},e.addClass=function(t,e){if(t&&!t.classList.contains(e))return t.classList.add(e)},e.parseEl=function(t){return t?t.indexOf("#")>=0?document.querySelector(t):t.indexOf(".")>=0?document.querySelectorAll(t)[0]:~["a","p","div","section","span","article","header","footer","main","aside","i","strong","small","tr","table"].indexOf(t)?(console.error("[DatePicker Warn] do not mount datepicker to pure html tag, use class name or id instead "),null):document.querySelector(t):null},e.defaultLanguage={locale:"zh-cn",pack:{days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["01\u6708","02\u6708","03\u6708","04\u6708","05\u6708","06\u6708","07\u6708","08\u6708","09\u6708","10\u6708","11\u6708","12\u6708"],year:"\u5e74"}},e.setLanguage=function(t){var e,a=t.locale.toLowerCase(),n=t.pack,r=n.months,i=n.days;return e="en"===a||"en-us"===a||"en-gb"===a?function(t,e){return r[e]+" "+t}:function(t,e){return""+t+n.year+r[e]},{week:i,title:e}},e.getLanguage=function(t,a){return a&&t[a]?{locale:a,pack:t[a]}:e.defaultLanguage},e.quickSort=n});t(n);var r=e(function(t,e){function a(t){return parseInt(t,10)}function r(t){if(!t)return new Date;if(t instanceof Date)return t;var e=new Date(t);return e.getTime()||(e=null),e}e.__esModule=!0,e.format=function(t,e,a){var r={DD:n.padding(t.getDate()),MM:n.padding(t.getMonth()+1),YYYY:t.getFullYear()};return{origin:t,date:r.DD,month:r.MM,year:r.YYYy,day:t.getDay(),value:e.replace(/(?:\b|%)([dDMyYHhaAmsz]+|ap|AP)(?:\b|%)/g,function(t,e){return void 0===r[e]?e:r[e]})}},e.parseFormatted=function(t,e){var n,i,s,l={DD:"([0-9][0-9])",dd:"([0-9][0-9])",MM:"([0-9][0-9])",mm:"([0-9][0-9])",YYYY:"([0-9][0-9][0-9][0-9])",yyyy:"([0-9][0-9][0-9][0-9])","%":""},d="",o=0,u=[""],c="",h=r(t);if(h)return h;for(h=new Date(2e3,0,1);o<e.length;){for(n=e.charAt(o);o+1<e.length&&void 0!==l[n+e.charAt(o+1)];)n+=e.charAt(++o);void 0!==(c=l[n])?""!==c&&(d+=l[n],u.push(n)):d+=n,o++}if(i=t.match(new RegExp(d)),s=u.length,!i||i.length!==s)return null;for(o=0;o<s;o++)if(""!==(n=u[o]))switch(c=a(i[o]),n){case"YYYY":h.setYear(c);break;case"MM":h.setMonth(c);break;case"DD":h.setDate(c)}return h}});t(r);var i=e(function(t,e){e.__esModule=!0;var a=function(){function t(t){this.stack=[],this.isEmpty()&&this.push(t)}return t.prototype.pop=function(){return this.stack.pop()},t.prototype.push=function(t){var e=this;if(n.isArray(t))for(var a=0;a<t.length;a++)e.stack.push(t[a]);else this.stack.push(t)},t.prototype.clear=function(){this.stack=[]},t.prototype.size=function(){return this.stack.length},t.prototype.peek=function(){return this.stack[this.stack.length-1]},t.prototype.isEmpty=function(){return 0===this.stack.length},t.prototype.shift=function(t){return this.stack.shift()},t.prototype.unshift=function(t){this.stack.unshift(t)},t.prototype.toString=function(t){return t?this.stack.join(t):this.stack.join(" ")},t}();e.default=a});t(i);var s=e(function(t,e){function a(t){var e=new i.default(["calendar-cell","calendar-date-cell"]);return t?(n.diff(t,u,"days")<0&&e.push("disabled"),0===t.getDay()&&e.push("calendar-cell-weekend"),6===t.getDay()&&e.push("calendar-cell-weekday")):e.push(["disabled","empty"]),e.toString()}function s(t,e,i){for(var s=[],l=new Date(t,e,1),d={year:l.getFullYear(),month:l.getMonth(),date:l.getDate(),index:l.getMonth()},o=n.getFirstDay(d.year,d.month),u=0;u<o;u++)s.push({date:"",className:a(),text:"<div class='date'></div><div class='placeholder'></div>",key:""});for(var c=1;c<=n.getDates(d.year,d.month);c++){var h=new Date(d.year,d.month,c),f=r.format(h,i).value,v='<div class="date">'+n.padding(c)+'</div><div class="placeholder"></div>';s.push({date:c,className:a(h),text:v,key:f})}return{template:s.map(function(t){return'<div class="'+t.className+'"\n            '+(t.key?"data-date="+t.key:"")+">"+t.text+"</div>"}).join(" "),year:d.year,month:d.index}}function l(t,e,a){for(var n=[],r=0;r<=a;r++){var i=new Date(t.getFullYear(),t.getMonth()+r,1),l=s(i.getFullYear(),i.getMonth(),e);n.push({template:l.template,year:l.year,month:l.month})}return n}function d(t,e){return e?"":" calendar-"+t}function o(t,e,a,n){var r=n.week.map(function(t,e){return'<div class="'+new i.default(["calendar-cell","calendar-day-cell",0===e?"calendar-cell-weekday":6===e?"calendar-cell-weekend":""]).toString()+'">'+t+"</div>"}).join(""),s=t.map(function(t,i){var s=t.year,l=t.month,o='<div class="calendar-title">'+n.title(s,l)+"</div>",u=t.template,c="";return e||a?c='<div class="calendar-main'+d(i,a)+'">\n                   <div class="calendar-head">'+o+'</div>  \n                   <div class="calendar-day"> '+r+'</div>\n                    <div class="calendar-body">'+u+"</div>\n            </div>":c+="<div class='calendar-main calendar-"+i+'\'>\n                    <div class="calendar-head">'+o+'</div>\n                    <div class="calendar-body">'+u+"</div>\n              </div>",c});return e||a||s.unshift('<div class="calendar-day">'+r+"</div>"),s.join("")}e.__esModule=!0;var u=new Date;e.default=function(t,e,a,r,i,s){var d="calendar-"+(r?"double-views":i?"single-view":"flat-view"),u=o(l(t,a,r?1:i?0:n.diff(t,e)),r,i,s);return'<div class="calendar '+d+'"> '+(r||i?"\n         <div class=\"calendar-action-bar\">\n            <button class='calendar-action calendar-action-prev'><span>prev</span></button>\n            <button class='calendar-action calendar-action-next'><span>next</span></button>\n         </div>\n        ":"")+u+"</div>"}});t(s);var l=e(function(t,e){function a(t,e,a){for(var r=[],i=0;i<t.length;i++){var s=n.attr(t[i],"data-date");s&&r.push(s)}for(var l=-1,d=-1,i=0;i<r.length;i++){var o=r[i];o===e?l=i:o===a&&(d=i)}return d===l||d<0?[]:r.slice(l+1,d)}function r(t,e,a,r){for(var i=function(t){return n.inArray(e,t)},s=[],d=a[0],o=a[a.length-1],u=0;u<t.length;u++){var c=t[u],h=t[u+1];if(a.length>0){var f=n.attr(t[u],"data-date");f===d?n.addClass(c,"start-date"):f===o&&n.addClass(c,"end-date")}else if(c&&h){var v=n.attr(c,"data-date"),g=n.attr(h,"data-date");if(v&&g){var m=r(v);n.diff(m,l,"days")>=0&&(i(g)&&i(v)||i(v)&&!i(g))&&s.length<2&&(n.addClass(c,"start-date"),n.addClass(h,"end-date"),s.push(v,g))}}}return a.length>0&&(s=a),s}function i(t,e,a){if(a)for(var r=e.querySelectorAll(".in-range"),i=0;i<r.length;i++)n.removeClass(r[i],"in-range");else for(i=0;i<t.length;i++){var s=n.attrSelector("data-date",t[i]),l=e.querySelector(s);n.hasClass(l,"active")||n.addClass(l,"in-range")}}e.__esModule=!0;var s=new Date,l=new Date(s.getFullYear(),s.getMonth(),s.getDate());e.ranged=i,e.setDefaultRange=function(t,e,s,l,d,o,u){var c=[];if(o){var h=a(e,(c=r(e,d,s,u))[0],c[c.length-1]);h.length>0&&i(h,t,!1)}else c=s.length>0?s:[l];for(var f=0;f<c.length;f++){var v=n.attrSelector("data-date",c[f]),g=t.querySelector(v);n.addClass(g,"active")}return c}});t(l);var d=e(function(t,e){e.__esModule=!0,e.monthSwitch=function(t,e,a){var n={year:this.date.getFullYear(),month:this.date.getMonth(),date:this.date.getDate()},r=n.month+t;this.multiViews&&(r+=t>0?1:-1),this.date=new Date(n.year,r,n.date),this.buildCalendar(e,a),this.handlePickDate(this.element,this.selected,this.double,this.dates,this.parse,this.format,this.limit,this.update),this.dataRenderer(this.data)},e.buildCalendar=function(t,e){var a=this;if(this.element=n.parseEl(t),!this.element)return console.error("[Calendar Warn] invalid selector,current selector "+t),!1;var r=this.startDate.getTime(),i=(this.endDate.getTime(),this.date.getTime());this.element.innerHTML=s.default(this.date,this.endDate,this.dateFormat,this.multiViews,this.flatView,n.setLanguage(e)),this.selected=l.setDefaultRange(this.element,this.element.querySelectorAll(".calendar-date-cell:not(.empty)"),this.selected,this.format(this.date).value,this.dates,this.double,this.parse);var d=this.element.querySelector(".calendar-action-prev"),o=this.element.querySelector(".calendar-action-next");d&&o&&(n.diff(this.date,this.endDate)>=2?o.addEventListener("click",function(){a.monthSwitch(1,t,e),n.removeClass(d,"disabled"),n.removeClass(d,"calendar-action-disabled")}):(n.addClass(o,"disabled"),n.addClass(o,"calendar-action-disabled")),i>r?d.addEventListener("click",function(){a.monthSwitch(-1,t,e),n.removeClass(o,"disabled"),n.removeClass(o,"calendar-action-disabled")}):(n.addClass(d,"disabled"),n.addClass(d,"calendar-action-disabled")))},e.init=function(t,e){var a=this;if(t.format&&(this.dateFormat=t.format),!t.multiViews&&t.flatView&&(this.multiViews=!1,this.flatView=!0),(t.flatView&&t.multiViews||!t.flatView&&t.multiViews)&&(this.flatView=!1,this.multiViews=!0),t.flatView||t.multiViews||(this.flatView=!1,this.multiViews=!1),this.double=!!n.isBoolean(t.doubleSelect)&&t.doubleSelect,this.startDate=n.isDate(t.from)?t.from:new Date,this.date=this.startDate,this.endDate=n.isDate(t.to)?t.to:new Date(this.date.getFullYear(),this.date.getMonth()+6,this.date.getDate()),this.limit=this.double&&n.isNumber(t.limit)?t.limit:1,this.flatView){var r=this.endDate.getFullYear(),i=this.endDate.getMonth(),s=this.endDate.getDate();this.endDate=new Date(r,i+1,s)}if(!e.dates||e.dates&&e.dates.length<=0){for(var l=new Date,d=n.diff(this.endDate,l,"days"),r=l.getFullYear(),i=l.getMonth(),s=l.getDate(),o=[],u=0;u<d;u++){var c=new Date(r,i,s+u),h=a.format(c).value;o.push(h)}this.data={},this.dates=o}else this.dates=e.dates,this.data=e.data;this.buildCalendar(t.el,n.getLanguage(t.language,t.defaultLanguage)),this.handlePickDate(this.element,this.selected,this.double,this.dates,this.parse,this.format,this.limit,this.update)}});t(d);var o=e(function(t,e){function a(t,e,a,i,s,d,o){if(d){var u={start:a.querySelector(".start-date"),end:a.querySelector(".end-date")},c=t[0],h=t[t.length-1],f={start:a.querySelector(n.attrSelector("data-date",c)),end:a.querySelector(n.attrSelector("data-date",h))};if(c===h)n.removeClass(u.start,"start-date"),n.removeClass(u.start,"active"),n.removeClass(u.end,"end-date"),n.removeClass(u.end,"active"),n.addClass(f.start,"active"),n.addClass(f.start,"start-date");else{var v=r(i(c),i(h));n.addClass(f.end,"active"),v>0?v>s?(n.addClass(f.end,"start-date"),n.removeClass(u.start,"start-date"),n.removeClass(u.start,"active")):o?n.addClass(f.end,"end-date"):(n.removeClass(f.start,"active"),n.removeClass(f.start,"start-date"),n.addClass(f.end,"start-date")):v<0&&(n.removeClass(f.start,"active"),n.removeClass(f.start,"start-date"),n.addClass(f.end,"start-date"))}l.ranged([],a,!0),o&&l.ranged(e,a,!1)}else{for(var g=a.querySelectorAll(".active"),m=0;m<g.length;m++)n.removeClass(g[m],"active");var p=n.attrSelector("data-date",t[0]),y=a.querySelector(p);n.hasClass(y,"disabled")||n.addClass(y,"active")}}function r(t,e){var a=n.diff(t,e,"days");return 0===a?0:-1*a}function i(t,e,a,i,s,l,d,o){function u(t){return n.inArray(l,t)}var c=[],h=[],f=e[0],v=e[e.length-1],g=o(f),m=r(g,o(v)),p=e.length;if(p>=2)if(m<=0)u(t)?e.shift():e=[e[0]];else if(u(v))for(var y=g.getFullYear(),D=g.getMonth(),w=g.getDate(),b=1;b<m;b++){var C=d(x=new Date(y,D,w+b)).value;u(C)&&h.push(C),c.push(C)}else u()&&v&&(e.shift(),c.push(v));else if(1===p){var M=e[e.length-1];e=u(M)?[M]:a}else e=a;if((s=c.length===h.length)||(e=[e[e.length-1]]),2===e.length){var k=null,Y=o(e[e.length-1]),S=o(e[0]),F=-1*r(Y,S);if(F>0){var y=S.getFullYear(),D=S.getMonth(),V=S.getDate();c=[],h=[];for(b=0;b<F;b++){var x=new Date(y,D,V+b),L=d(x).value;u(L)&&(k=L,h.push(L)),~c.indexOf(L)||c.push(L)}var _=r(o(k),Y);1===_||-1===_?s=!0:(c=[],e=[e[0]],s=!1)}if(h.length===c.length?s=!0:(s=!1,e=[e[0]]),c.length>i){s=!1;var j=e[e.length-1];e=u(j)?[j]:[a[0]]}}return{selected:e,allValid:s,inRange:h,range:c}}e.__esModule=!0,e.default=function(t,e,r,s,l,d,o,u){for(var c=t.querySelectorAll(".calendar-date-cell"),h=0;h<c.length;h++)!function(h){var f=c[h];f.addEventListener("click",function(c){var h=!1,v=e,g=[],m=n.attr(f,"data-date"),p=e.indexOf(m);if(!m||p>=0)return!1;if((r&&e.length>=2||!r)&&(e=[]),e.push(m),r){var y=i(m,e,v,o,h,s,d,l);e=y.selected,g=y.range,h=y.allValid}a(e,g,t,l,o,r,h),u(e)})}(h)}});return t(o),t(e(function(t,e){e.__esModule=!0;var i=function(){return function(t){var e=this;return this.init=d.init,this.date=new Date,this.limit=1,this.double=!1,this.dateFormat="YYYY-MM-DD",this.element=null,this.startDate=new Date,this.endDate=null,this.selected=[],this.flatView=!1,this.multiViews=!1,this.monthSwitch=d.monthSwitch,this.buildCalendar=d.buildCalendar,this.handlePickDate=o.default,this.format=function(t){return r.format(t,e.dateFormat)},this.parse=function(t){return r.parseFormatted(t,e.dateFormat)},this.update=function(t){a.default.$emit("update",t),e.selected=t},this.dataRenderer=function(t){Object.keys(t).length<=0?a.default.$remove("data"):a.default.$emit("data",{data:t,nodeList:e.element.querySelectorAll(".calendar-date-cell")})},t.bindData||this.init(t,{}),{on:a.default.$on,data:function(a){if(t.bindData){var r=a&&a({dates:[],data:{}});!n.isObject(r)||Object.keys(r.data).length<=0||r.dates.length<=0?e.init(t,{}):(e.init(t,{data:r.data,dates:r.dates}),e.dataRenderer(r.data)),e.update(e.selected)}},diff:function(t,e){return n.diff(t,e,"days")},parse:this.parse,format:this.format}}}();e.default=i}))});