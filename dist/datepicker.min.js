  /*
   *  TypePicker v1.5.8
   *  Fi2zz / wenjingbiao@outlook.com
   *  https://github.com/Fi2zz/datepicker
   *  (c) 2017-2018, wenjingbiao@outlook.com
   *  MIT License
  */
  
  
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DatePicker=t()}(this,function(){"use strict";var e,t=(e={},{$on:function(t,a){e[t]||(e[t]=[]),e[t].push(a)},$emit:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=[].shift.call(t),r=e[n];if(!r||0===r.length)return!1;for(var i=0,s=void 0;s=r[i++];)s.apply(this,t)},$remove:function(t,a){var n=e[t];if(!n)return!1;if(a)for(var r=n.length-1;r>=0;r--)n[r]===a&&n.splice(r,1);else n&&(n.length=0)}}),a=function(e,t){return"["+e+'="'+t+'"]'};function n(e){return parseInt(e,10)}function r(e,t){var a=new Date(e,t,1),n=Date.UTC(a.getFullYear(),a.getMonth()+1,0);return new Date(n).getUTCDate()}function i(e,t,a){if(void 0===a&&(a=void 0),!e)return null;var n=e.getAttribute(t);return void 0===a&&(a=""),n||e.setAttribute(t,a)}function s(e,t,a,n){var r;if(void 0===a&&(a="month"),!v(e)||!v(t))return 0;if("month"===a)r=Math.abs(12*e.getFullYear()+e.getMonth())-(12*t.getFullYear()+t.getMonth());else if("days"===a){var i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=Math.round(i-s)/864e5;r=n?Math.abs(o):o}return r}var o=function(e){return""+(e>9?e:"0"+e)};function l(e){return Object.prototype.toString.call(e)}function d(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function c(e){return"[object String]"===l(e)}function u(e){return"[object Array]"===l(e)}function h(e){return"[object Object]"===l(e)}function f(e){return"[object Number]"===l(e)}function v(e){return"[object Date]"===l(e)}function g(e){return"[object Function]"===l(e)}function p(e,t){!e||!t||e.className&&-1!=e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className+=(e.className?" ":"")+t)}function D(e,t){!e||!t||e.className&&-1==e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),""))}function m(e,t){var a=t;(h(t)||u(t))&&(a=JSON.stringify(t)),console.error("["+e+"] "+a+" ")}function y(e){return e[0]}function b(e){return e[e.length-1]}function w(e){return u(e)||h(e)?u(e)?e.length<=0:h(e)?Object.keys(e).length<=0:void 0:(m("isEmpty","Expect an Object or an Array,but got "+l(e)),!1)}var M=/\d{2,4}(\W{1})\d{1,2}(\W{1})\d{1,2}/;function Y(e,t){t||(t="YYYY-MM-DD"),t=t.toUpperCase();var a={YYYY:e.getFullYear(),DD:o(e.getDate()),MM:o(e.getMonth()+1),D:e.getDate(),M:e.getMonth()+1},n=function(e){var t=e.split(/\W/,3);t.shift();for(var a=[],n=0;n<t.length;n++){var r=t[n];/\w\w/.test(r)&&a.push(r)}return t.length===a.length}(t);return{origin:e,date:n?a.DD:a.D,month:n?a.MM:a.M,year:a.YYYY,day:e.getDay(),value:t.replace(/(?:\b|%)([dDMyY]+)(?:\b|%)/g,function(e,t){return void 0===a[t]?t:a[t]})}}function N(e,t){t||(t="YYYY-MM-DD");var a=function(e){for(var t=e.split(/\w/).filter(function(e){return e}),a=e.split(/\W/).map(function(e){return"\\d{1,"+(e.length+1)+"}"}).join("^"),n=0;n<t.length;n++){var r=t[n];a=a.replace(/\^/,r)}return new RegExp(a)}(t);if(!M.test(e)||!a.test(e))return null;var n=function(e){if(!e)return new Date;if(e instanceof Date)return e;var t=new Date(e);return t.getTime()?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null}(e);if(n)return n;var r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i={D:[/\d{1,2}/,function(e,t){return e.day=parseInt(t)}],M:[/\d{1,2}/,function(e,t){return e.month=parseInt(t)-1}],DD:[/\d{2}/,function(e,t){return e.day=parseInt(t)}],MM:[/\d{2}/,function(e,t){return e.month=parseInt(t)-1}],YY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}],YYYY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}]};return(n=function(e,t){if(e.length>1e3)return null;var a=!0,n={year:0,month:0,day:0};if(t.replace(r,function(t){if(i[t]){var r=i[t],s=r[0],o=r[r.length-1],l=e.search(s);~l?e.replace(r[0],function(t){return o(n,t),e=e.substr(l+t.length),t}):a=!1}return i[t]?"":t.slice(1,t.length-1)}),!a)return null;var s=new Date(n.year,n.month,n.day);return new Date(s.getFullYear(),s.getMonth(),s.getDate())})(e,t)}var F=function(){function e(e){var t=this;this.formatter=function(e){return Y(e,t.dateFormat)},this.language={},this.views=1;var a=e.date,n=e.views,r=e.language,i=e.dateFormat,s=e.size;this.dateFormat=i;var o=2===n?1:"auto"===n?s:0;return this.language=r,this.views=n,[this.createActionBar("auto"!==this.views)+"  "+this.createView(this.createBody(o,a))]}return e.prototype.createActionBar=function(e){return e?"<div class=\"calendar-action-bar\">\n            <button class='calendar-action calendar-action-prev'><span>prev</span></button>\n            <button class='calendar-action calendar-action-next'><span>next</span></button>\n         </div>\n    ":""},e.prototype.createBody=function(e,t){for(var a=[],n=0;n<=e;n++){var r=new Date(t.getFullYear(),t.getMonth()+n,1),i=this.createMonthDateTemplate(r.getFullYear(),r.getMonth());a.push({template:i.template,year:i.year,month:i.month})}return a},e.prototype.createMonthDateTemplate=function(e,t){for(var a=this,n=new Date(e,t,1),i={year:n.getFullYear(),month:n.getMonth(),date:n.getDate(),index:n.getMonth()},s=new Date(i.year,i.month,1).getDay(),o=[],l=0;l<s;l++)o.push({date:"",className:this.setNodeClassName(),text:this.createPlaceholder(),key:""});for(l=1;l<=r(i.year,i.month);l++){var d=new Date(i.year,i.month,l),c=this.formatter(d),u=c.value,h=this.createPlaceholder(c.date),f=this.setNodeClassName(d),v=c.day;o.push({className:f,text:h,key:u,day:v})}return{template:o.map(function(e){return a.createNode(e.className,e.key,e.text,e.day)}).join(" "),year:i.year,month:i.index}},e.prototype.createView=function(e){var t=this,a=this.createMonthWeek(),n=e.map(function(e){var n=e.year,r=e.month,i=t.createMonthHeader(n,r),s=t.createMonthBody(e.template),o="";return"auto"!==t.views?o+=t.createMonthWrap(i,s,a):o=t.createMonthWrap(i,s),o});return"auto"===this.views&&n.unshift(a),n.join("")},e.prototype.createMonthWrap=function(e,t,a){return'<div class="calendar-main">'+e+" "+(a||"")+" "+t+"</div>"},e.prototype.createMonthWeek=function(){return'  <div class="calendar-day">'+this.language.days.map(function(e,t){return'<div class="'+["calendar-cell","calendar-day-cell",0===t?"calendar-cell-weekday":6===t?"calendar-cell-weekend":""].join(" ")+'">'+e+"</div>"}).join("")+"</div>"},e.prototype.createMonthBody=function(e){return'<div class="calendar-body">'+e+"</div>"},e.prototype.createMonthHeader=function(e,t){var a,n,r;return'<div class="calendar-head"><div class="calendar-title">'+(a=this.language,n=e,r=t,a.year?""+n+a.year+a.months[r]:a.months[r]+" "+n)+"</div></div>"},e.prototype.createNode=function(e,t,a,n){return'<div class="'+e+'" '+(n>=0?"data-day="+n:"")+" "+(t?"data-date="+t:"")+">"+a+"</div>"},e.prototype.createPlaceholder=function(e){return'<div class="date">'+(e||"")+'</div><div class="placeholder"></div>'},e.prototype.setNodeClassName=function(e){var t=["calendar-cell","calendar-date-cell"];return e?(0===e.getDay()&&t.push("calendar-cell-weekend"),6===e.getDay()&&t.push("calendar-cell-weekday")):t.push("disabled","empty"),t.join(" ")},e}();return function(){function e(e){var r,o=this;if(this.limit=1,this.views=1,this.date=new Date,this.startDate=null,this.endDate=null,this.selected=[],this.data={},this.disables={},this.element=null,this.doubleSelect=!1,this.disableDays=[],this.language={days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["01\u6708","02\u6708","03\u6708","04\u6708","05\u6708","06\u6708","07\u6708","08\u6708","09\u6708","10\u6708","11\u6708","12\u6708"],year:"\u5e74"},this.format=function(e,t){return Y(e,t||o.dateFormat)},this.parse=function(e,t){return N(e,t||o.dateFormat)},e)if(this.element=(r=e.el)?c(r)?r.indexOf("#")>=0?document.querySelector(r):r.indexOf(".")>=0?document.querySelectorAll(r)[0]:r.indexOf("#")<=-1||r.indexOf(".")<=-1?(m("ParseEl","Do not mount DatePicker to a pure html tag,"+r),!1):document.querySelector(r):r:null,this.element){var l=function(e){var t=y(e),a=b(e),n=[],r=[];if(t&&a){var i=void 0,l=s(i=v(t)?t:o.parse(t),v(a)?a:o.parse(a),"days",!0);if(l<=o.limit)for(var d=0;d<l;d++){var c=new Date(i.getFullYear(),i.getMonth(),i.getDate()+d),u=o.format(c).value;o.disables[u]?n.push(u):r.push(u)}}return{invalidDates:n,validDates:r}};t.$on("select",function(e){var n=e.type,r=e.value;if("disabled"===n)return!1;"selected"===n&&o.setDates(r),"switch"!==n&&t.$emit("update",e);var i=l(r);!function(e,t,n){if(n){for(var r,i,s=e.querySelectorAll(".in-range"),o=0;o<s.length;o++)D(s[o],"in-range");for(o=0;o<t.length;o++){var l=a("data-date",t[o]),d=e.querySelector(l);i="active",(r=d)&&i&&r.className&&-1!=r.className.search(new RegExp("\\b"+i+"\\b"))||p(d,"in-range")}}}(o.element,i.validDates,o.doubleSelect),function(e,t,a){for(var n=e.querySelectorAll(".calendar-date-cell"),r=0;r<n.length;r++)D(n[r],"active"),a&&(D(n[r],"start-date"),D(n[r],"end-date"));for(r=0;r<t.length;r++){var i=t[r],s=e.querySelector('[data-date="'+i+'"]');p(s,"active"),a&&(0===r&&p(s,"start-date"),2===t.length&&r===t.length-1&&p(s,"end-date"))}}(o.element,r,o.doubleSelect)}),t.$on("create",function(e){var a=!w(o.data),r=e.type;if("switch"===r){var d={year:o.date.getFullYear(),month:o.date.getMonth(),date:o.date.getDate()};o.date=new Date(d.year,d.month+e.size,d.date)}o.createDatePicker();var c=o.element.querySelectorAll(".calendar-cell");if(!o.endDate&&!w(o.disableDays))for(var u=o.disableDays,h=0;h<c.length;h++){var f=c[h],v=n(i(f,"data-day")),g=i(f,"data-date");!isNaN(v)&&u.indexOf(v)>=0&&(o.disables[g]=g)}t.$emit("select",{type:r,value:o.selected}),a&&t.$emit("data",{data:o.data,nodeList:c}),w(o.disables)||t.$emit("disabled",{nodeList:c,dateList:o.disables});var p=o.doubleSelect,D=o.selected,m=function(e){return!!o.disables[e]},M=o.selected,Y=function(e){var n=c[e];n.addEventListener("click",function(){return function(e){var n="selected",r=i(e,"data-date");if(!r)return!1;var d=M.indexOf(r),c=m(r),u=o.parse(r),h=new Date(u.getFullYear(),u.getMonth(),u.getDate()-1),f=m(o.format(h).value);if(a&&M.length<=0&&c||p&&f&&c||d>=0&&c)return!1;if(d>=0&&(M=o.disables[b(M)]?[b(M)]:[y(M)]),(p&&M.length>=2||!p)&&(M=[]),M.push(r),p){if(M.length>=2){var v=y(M),g=b(M),w=s(o.parse(g),o.parse(v),"days",!1);0===w?M=[v]:w<0?(g=b(M),m(g)?M.pop():M.shift()):(l(M).invalidDates.length>0||w>o.limit)&&M.shift()}M.length<=1&&m(y(M))&&(n="disabled",M=D)}else M=c?D:M,n=c?"disabled":"selected";t.$emit("select",{type:n,value:M})}(n)})};for(h=0;h<c.length;h++)Y(h)}),this.init(e)}else m("init","invalid selector,current selector "+this.element);else m("init","No instance option provided")}return e.prototype.on=function(e,a){return t.$on(e,a)},e.prototype.setDates=function(e){if(u(e)){var a=[],n="",r="";if(this.doubleSelect){e.length>2&&(e=e.slice(0,2)),n=e[0],r=e[e.length-1];var i=v(n)?n:this.parse(n),s=v(r)?r:this.parse(r);a=[this.format(i).value],n!==r&&a.push(this.format(s).value)}else{var o=e[e.length-1];a=[v(o)?this.format(o).value:o]}t.$emit("setDates",a)}else m("setDates","no dates provided,"+(e=[]))},e.prototype.setLanguage=function(e){u(e.days)&&u(e.months)&&(this.language={days:e.days,months:e.months,year:e.year})},e.prototype.setDisabled=function(e){var a=this,r=d({dates:"[optional]Expect an array of string or Date got "+d(e.dates)+" ",days:"[optional]Expect an array of number,got "+d(e.days),from:"[optional]Expect a string or Date ,got "+d(e.to),to:"[optional]Expect a string or Date ,got "+d(e.to)});if(!e||h(e)&&Object.keys(e).length<=0)return m("setDisabled",r),!1;if(e.dates&&!u(e.dates)||e.days&&!u(e.days))return m("setDisabled",r),!1;var i,s,o=u(e.dates)?e.dates.map(function(e){return e instanceof Date?a.format(e).value:a.parse(e)instanceof Date?e:void 0}).filter(function(e){return!!e}):[],l=u(e.days)?e.days.filter(function(e){var t=n(e);return!isNaN(t)&&t>=0&&t<=6}):[],c=e.to,f=e.from;if(f){if(v(f))i=f;else{if(!v(g=this.parse(f,this.dateFormat)))return m("setDisabled","invalid param,"+d({from:f})),!1;i=g}this.endDate=i}if(c){if(v(c))s=c;else{var g;if(!v(g=this.parse(c,this.dateFormat)))return m("setDisabled","invalid param,"+d({to:c})),!1;s=g}this.date=s,this.startDate=s}if(s)this.format(s).value;t.$emit("setDisabled",{dayList:l,dateList:o})},e.prototype.setData=function(e){if(g(e)){var a=e();if(h(a)&&Object.keys(a).length>0){var n={};for(var r in a){this.parse(r)instanceof Date&&(n[r]=a[r])}t.$emit("setData",n)}else{m("setData","you are passing wrong type of data to DatePicker,data should be like :\n          \n                    {"+(r=this.format(new Date,this.dateFormat).value)+':"value"}')}}},e.prototype.createDatePicker=function(){this.element.className=this.element.className+" calendar calendar-"+(2===this.views?"double-views":1===this.views?"single-view":"flat-view");var e=new F({date:this.date,size:s(this.startDate,this.endDate),language:this.language,views:this.views,dateFormat:this.dateFormat});this.element.innerHTML=e[0];var a=this.element.querySelector(".calendar-action-prev"),n=this.element.querySelector(".calendar-action-next");if(a&&n){var r=this.endDate?s(this.endDate,this.date):1;(this.endDate?s(this.date,this.startDate):2)>1?a.addEventListener("click",function(){t.$emit("create",{type:"switch",size:-1}),D(n,"disabled calendar-action-disabled")}):p(a,"disabled calendar-action-disabled"),r>=1?n.addEventListener("click",function(){t.$emit("create",{type:"switch",size:1}),D(a,"disabled calendar-action-disabled")}):p(n,"disabled calendar-action-disabled")}},e.prototype.init=function(e){var a=this;this.doubleSelect="[object Boolean]"===l(e.doubleSelect),this.dateFormat=e.format,this.views=function(e){if(!e)return 1;var t=n(e);return isNaN(t)?"auto"!==e?1:"auto":t>2||t<=0?1:t}(e.views),this.startDate=v(e.startDate)?e.startDate:new Date,e.endDate&&v(e.endDate)&&(this.endDate=e.endDate),this.date=this.startDate,this.limit=this.doubleSelect?f(e.limit)?e.limit:2:1;var i={dateList:[],dayList:[]};t.$on("setDates",function(e){return a.selected=e}),t.$on("setData",function(e){return a.data=e}),t.$on("setDisabled",function(e){return i=e}),function(e,t){void 0===t&&(t=!0);var a=window.setTimeout(function(){g(e)?(e(),t&&clearTimeout(a)):(m("nextTick","Except a function,but got "+l(e)),clearTimeout(a))},0)}(function(){var o={},l=!w(a.data);v(e.startDate)&&v(e.endDate)||l&&m("init","please provide [startDate] and [endDate] while binding data to datepicker");var d={},g=i.dateList,p=i.dayList;if(a.endDate){for(var D in a.data)o[D]=a.parse(D).getDay();if(l)for(var M=s(a.startDate,a.endDate,"days",!0),N=0;N<M;N++){var F=new Date(a.startDate.getFullYear(),a.startDate.getMonth(),a.startDate.getDate()+N),x=a.format(F).value;a.data[x]||(d[x]=x)}for(var F in o){var S=n(o[F]);g.indexOf(F)>=0&&(delete a.data[F],d[F]||(d[F]=F)),p.indexOf(S)>=0&&(o[F]&&delete a.data[F],d[F]||(d[F]=F))}for(var F in d){var k=a.parse(F);s(a.endDate,k,"days")<0&&delete d[F]}}else{for(var j=0,$=g;j<$.length;j++){d[F=$[j]]=F}a.disableDays=p}a.disables=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a={};function n(e,t){for(var a in void 0===e&&(e={}),t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}for(var r=0;r<e.length;r++){var i=e[r];if(i)if(u(i))for(var s=0;s<i.length;s++){var o=i[s];h(o)?a=n(a,o):v(o)||(a[o]=o)}else h(i)?a=n(a,i):(c(i)||f(i))&&(a[i]=i)}return a}(function(e,t,a,n){var i=e.getDate(),s={};if(n){for(var o=1;o<=i-1;o++)s[d=Y(new Date(e.getFullYear(),e.getMonth(),i-o),a).value]=d;var l=r(t.getFullYear(),t.getMonth())-t.getDate();for(o=1;o<=l;o++){var d;s[d=Y(new Date(t.getFullYear(),t.getMonth(),t.getDate()+o),a).value]=d}}return s}(a.startDate,a.endDate,a.dateFormat,!!a.endDate),d);var O=y(a.selected),E=b(a.selected);(a.disables[O]||a.disables[E]||a.doubleSelect&&O&&O===E&&E)&&(m("setDates","Illegal dates"+a.selected),a.selected=[]),"auto"===a.views&&(w(a.selected)||(a.date=a.parse(y(a.selected))),a.endDate||(a.endDate=new Date(a.startDate.getFullYear(),a.startDate.getMonth()+6,a.startDate.getDate()))),1===a.views&&a.doubleSelect&&a.selected.length>=2&&O===E&&a.selected.pop(),t.$emit("create",{type:"init"})})},e}()});
  