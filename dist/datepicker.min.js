!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DatePicker=t()}(this,function(){"use strict";var e,t=(e={},{$on:function(t,a){e[t]||(e[t]=[]),e[t].push(a)},$emit:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=[].shift.call(t),i=e[n];if(!i||0===i.length)return!1;for(var r=0,s=void 0;s=i[r++];)s.apply(this,t)},$remove:function(t,a){var n=e[t];if(!n)return!1;if(a)for(var i=n.length-1;i>=0;i--)n[i]===a&&n.splice(i,1);else n&&(n.length=0)}}),a=function(e,t){return"["+e+'="'+t+'"]'};function n(e,t,a){if(void 0===a&&(a=void 0),!e)return null;var n=e.getAttribute(t);return void 0===a&&(a=""),n||e.setAttribute(t,a)}function i(e,t,a){if(void 0===a&&(a="month"),e||(e=new Date),t||(t=new Date),"month"===a)return Math.abs(12*e.getFullYear()+e.getMonth()-(12*t.getFullYear()+t.getMonth()));if("days"===a){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return Math.round(n-i)/864e5}}var r=function(e,t){var a=new Date(e,t,1),n=Date.UTC(a.getFullYear(),a.getMonth()+1,0);return new Date(n).getUTCDate()},s=function(e){return""+(e>9?e:"0"+e)};function l(e){return Object.prototype.toString.call(e)}function d(e){return"[object Array]"===l(e)}function o(e){return"[object Object]"===l(e)}function c(e){return"[object Date]"===l(e)}function u(e,t){return!!(e&&t&&e.className&&-1!=e.className.search(new RegExp("\\b"+t+"\\b")))}function h(e,t){!e||!t||e.className&&-1!=e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className+=(e.className?" ":"")+t)}function f(e,t){!e||!t||e.className&&-1==e.className.search(new RegExp("\\b"+t+"\\b"))||(e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),""))}function g(e){window.setTimeout(e,0)}function v(e){window.clearTimeout(e)}function p(e,t){var a=t;(o(t)||d(t))&&(a=JSON.stringify(t)),console.error("["+e+"] "+a+" ")}function m(e){return e?"[object String]"!==l(e)?e:e.indexOf("#")>=0?document.querySelector(e):e.indexOf(".")>=0?document.querySelectorAll(e)[0]:e.indexOf("#")<=-1||e.indexOf(".")<=-1?(p("ParseEl","Do not mount DatePicker to a pure html tag,"+e),!1):document.querySelector(e):null}var D=new Date,y=function(){function e(e){var t=e.startDate,a=e.endDate,n=e.multiViews,r=e.flatView,s=e.singleView,l=e.language,d=e.infiniteMode,o=e.dateParser,c=e.dateFormatter,u={startDate:t,endDate:a,gap:n?1:r?i(t,a):0,infiniteMode:d,formatter:c,parse:o},h={template:this.createBody(u),multiViews:n,flatView:r,language:l,singleView:s};this.template=""+this.createActionBar(n||s)+this.createView(h)}return e.prototype.createActionBar=function(e){return e?"<div class=\"calendar-action-bar\">\n            <button class='calendar-action calendar-action-prev'><span>prev</span></button>\n            <button class='calendar-action calendar-action-next'><span>next</span></button>\n         </div>\n    ":""},e.prototype.createBody=function(e){for(var t=e.startDate,a=e.endDate,n=e.gap,i=e.infiniteMode,r=e.formatter,s=e.parse,l=[],d=0;d<=n;d++){var o=new Date(t.getFullYear(),t.getMonth()+d,1),c=this.createNodeList({year:o.getFullYear(),month:o.getMonth(),formatter:r,parse:s,infiniteMode:i,endDate:a});l.push({template:c.template,year:c.year,month:c.month})}return l},e.prototype.createNodeList=function(e){for(var t=this,a=e.year,n=e.month,i=e.infiniteMode,s=e.formatter,l=e.endDate,d=[],o=new Date(a,n,1),c={year:o.getFullYear(),month:o.getMonth(),date:o.getDate(),index:o.getMonth()},u=new Date(c.year,c.month,1).getDay(),h=0;h<u;h++)d.push({date:"",className:this.setCellClassList({}),text:this.createPlaceholder(),key:""});for(h=1;h<=r(c.year,c.month);h++){var f=new Date(c.year,c.month,h),g=s(f),v=g.value,p=this.createPlaceholder(g.date),m=this.setCellClassList({date:f,infiniteMode:i,endDate:l}),D=g.day;d.push({className:m,text:p,key:v,day:D})}return{template:d.map(function(e){return t.createNode(e.className,e.key,e.text,e.day)}).join(" "),year:c.year,month:c.index}},e.prototype.createView=function(e){var t=e.template,a=e.multiViews,n=e.flatView,i=e.singleView,r=e.language,s=r.week.map(function(e,t){return'<div class="'+["calendar-cell","calendar-day-cell",0===t?"calendar-cell-weekday":6===t?"calendar-cell-weekend":""].join(" ")+'">'+e+"</div>"}).join(""),l=t.map(function(e){var t=e.year,n=e.month,l='<div class="calendar-title">'+r.title(t,n)+"</div>",d=e.template,o="";return a||i?o+="<div class='calendar-main'>\n                    <div class=\"calendar-head\">"+l+'</div>\n                   <div class="calendar-day"> '+s+'</div>\n                    <div class="calendar-body">'+d+"</div>\n              </div>":o='<div class="calendar-main">\n                   <div class="calendar-head">'+l+'</div>  \n                    <div class="calendar-body">'+d+"</div>\n            </div>",o});return n&&l.unshift('<div class="calendar-day">'+s+"</div>"),l.join("")},e.prototype.createNode=function(e,t,a,n){return'<div class="'+e+'" '+(n?"data-day="+n:"")+" "+(t?"data-date="+t:"")+">"+a+"</div>"},e.prototype.createPlaceholder=function(e){return'<div class="date">'+(e||"")+'</div><div class="placeholder"></div>'},e.prototype.setCellClassList=function(e){var t=e.date,a=e.infiniteMode,n=e.endDate,r=["calendar-cell","calendar-date-cell"];return t?(a||(i(t,D,"days")<0&&r.push("disabled"),n&&i(t,n,"days")>0&&r.push("disabled")),0===t.getDay()&&r.push("calendar-cell-weekend"),6===t.getDay()&&r.push("calendar-cell-weekday")):r.push("disabled","empty"),r.join(" ")},e}(),b=new Date,w=new Date(b.getFullYear(),b.getMonth(),b.getDate());function M(e,t,n,i){if(n)for(var r=t.querySelectorAll(".in-range"),s=0;s<r.length;s++)f(r[s],"in-range");else for(s=0;s<e.length;s++){var l=a("data-date",e[s]),d=t.querySelector(l);u(d,"active")||h(d,"in-range")}if(i)return[]}function Y(e){var t=e.collector,r=e.collection,s=e.data,l=e.isDouble,d=e.parse,o=e.format,c=e.inDates,u=e.isInit,f=[];if(l){if(s.length>=2){var g=s[0],v=s[s.length-1];c(g)||(s=[]);for(var p=d(g),m=d(v),D=p.getFullYear(),y=p.getMonth(),b=p.getDate(),Y=[],S=i(m,p,"days")+1,V=0;V<S;V++){var k=o(new Date(D,y,b+V)).value;c(k)||Y.push(k)}Y.length>=2&&(s=[])}(s.length>0&&u||!u)&&(f=function(e,t,a,r){for(var s=[],l=a[0],d=a[a.length-1],o=0;o<e.length;o++){var c=e[o],u=e[o+1];if(a.length>0){var f=n(e[o],"data-date");f===l?h(c,"start-date"):f===d&&h(c,"end-date")}else if(c&&u){var g=n(c,"data-date"),v=n(u,"data-date");g&&v&&i(r(g),w,"days")>=0&&(t(v)&&t(g)||t(g)&&!t(v))&&s.length<2&&(h(c,"start-date"),h(u,"end-date"),s.push(g,v))}}return a.length>0&&(s=a),s}(r,c,s,d));var F=function(e,t,a){for(var i=[],r=0;r<e.length;r++){var s=n(e[r],"data-date");s&&i.push(s)}var l=-1,d=-1;for(r=0;r<i.length;r++){var o=i[r];o===t?l=r:o===a&&(d=r)}return d===l||d<0?[]:i.slice(l+1,d)}(r,f[0],f[f.length-1]);F.length>0&&M(F,t,!1)}else f=s;for(V=0;V<f.length;V++){var x=a("data-date",f[V]);h(t.querySelector(x),"active")}return f}var S=function(e){for(var t=e.element,r=e.selected,s=e.isDouble,l=e.parse,d=e.format,o=e.limit,c=e.inDates,g=e.update,v=e.infiniteMode,p=e.bindData,m=t.querySelectorAll(".calendar-date-cell"),D=function(e){var D=m[e];D.addEventListener("click",function(){var e=r,m=n(D,"data-date"),y=r.indexOf(m);if(!m||r.length<=0&&!c(m)&&p)return!1;if(y>=0&&(r=[r[r.length-1]]),(s&&r.length>=2||!s)&&(r=[]),r.push(m),s){var b=function(e){var t=e.selected,a=e.date,n=e.cache,i=e.limit,r=e.format,s=e.parse,l=e.inDates,d=e.bindData,o=[],c=[],u=!1,h=t[0],f=t[t.length-1],g=s(h),v=s(f);if(d){var p=V(g,v),m=t.length;if(m>=2)if(p<=0)l(a)?t.shift():t=[t[0]];else if(l(f))for(var D=g.getFullYear(),y=g.getMonth(),b=g.getDate(),w=1;w<p;w++){var M=new Date(D,y,b+w),Y=r(M).value;l(Y)&&c.push(Y),o.push(Y)}else l()&&f&&(t.shift(),o.push(f));else if(1===m){var S=t[t.length-1];if(l(S))t=[S];else if(n.length>=2){for(var k=[],w=0;w<n.length;w++)l(n[w])&&k.push(n[w]);if(k.length===n.length){var F=n[0],x=n[n.length-1];t=F!==x?n:[F]}else t=[]}else t=[n[0]]}else t=n;if(t.length<=0&&(t=n),(u=o.length===c.length)||(t=[t[t.length-1]]),2===t.length){var N=null,j=t[t.length-1],O=s(j),A=s(t[0]),q=-1*V(O,A);if(q>0){var D=A.getFullYear(),y=A.getMonth(),I=A.getDate();o=[],c=[];for(var w=0;w<q;w++){var M=new Date(D,y,I+w),L=r(M).value;l(L)&&(N=M,c.push(L)),~o.indexOf(L)||o.push(L)}var E=V(N,O);1===E||-1===E?u=!0:(o=[],t=[t[0]],u=!1)}if(c.length===o.length?u=!0:(u=!1,t=[t[0]]),o.length>i){u=!1;var P=t[t.length-1];t=l(P)?[P]:[n[0]]}}}else{t.length>=2&&h===f&&t.pop();var C=V(g,v);if(C>0&&C<=i){for(var w=1;w<C;w++){var R=new Date(g.getFullYear(),g.getMonth(),g.getDate()+w);o.push(r(R).value)}u=!0}else(C>i||C<0)&&t.shift()}return{selected:t,allValid:u,range:o}}({date:m,selected:r,cache:e,limit:o,format:d,parse:l,inDates:c,infiniteMode:v,bindData:p});r=b.selected;var w=b.range,Y=b.allValid,S=r[0],k=r[r.length-1],F=V(l(S),l(k)),x=function(e,t,n,i,r,s){var l={start:e.querySelector(".start-date"),end:e.querySelector(".end-date")},d={start:e.querySelector(a("data-date",t)),end:e.querySelector(a("data-date",n))};{if(0===i)return!u(d.start,"disabled")&&(f(l.start,"start-date"),f(l.start,"active"),f(l.end,"end-date"),f(l.end,"active"),h(d.start,"active"),h(d.start,"start-date"),!0);h(d.end,"active"),i>0?r?(h(d.end,"start-date"),f(l.start,"start-date"),f(l.start,"active")):s?h(d.end,"end-date"):(f(d.start,"active"),f(d.start,"start-date"),h(d.end,"start-date")):i<0&&(f(d.start,"active"),f(d.start,"start-date"),h(d.end,"start-date"))}return!0}(t,S,k,F,F>o,Y);x&&M([],t,!0),Y&&x&&M(w,t,!1)}else{var N=D,j=!0;c(m)||(r=e,j=!1),function(e,t,a){if(a){for(var n=t.querySelectorAll(".active"),i=0;i<n.length;i++)f(n[i],"active");u(e,"disabled")||h(e,"active")}}(N,t,j)}var O,A="selected";if(s&&p)if(r.length<=1){var q=r[0];c(q)||(A="disabled")}else if(r.length>=2){var I=D.previousElementSibling,L=(q=r[0],l(q)),E=n(I,"data-date")||q,P=-1*i(L,l(m),"days");(!c(m)&&!c(E)||!c(m)&&(O=m,!(r.indexOf(O)>=0))||P>o||P<0)&&(A="disabled")}g({type:A,value:r})})},y=0;y<m.length;y++)D(y)};function V(e,t){var a=i(e,t,"days");return 0===a?0:-1*a}function k(e,t){t||(t="YYYY-MM-DD");var a=function(e){if(!e)return new Date;if(e instanceof Date)return e;var t=new Date(e);return t.getTime()?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null}(e);if(a)return a;var n=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,i={D:[/\d{1,2}/,function(e,t){return e.day=parseInt(t)}],M:[/\d{1,2}/,function(e,t){return e.month=parseInt(t)-1}],DD:[/\d{2}/,function(e,t){return e.day=parseInt(t)}],MM:[/\d{2}/,function(e,t){return e.month=parseInt(t)-1}],YY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}],YYYY:[/\d{2,4}/,function(e,t){return e.year=parseInt(t)}]};return(a=function(e,t){if(e.length>1e3)return null;var a=!0,r={year:0,month:0,day:0};if(t.replace(n,function(t){if(i[t]){var n=i[t],s=n[0],l=n[n.length-1],d=e.search(s);~d?e.replace(n[0],function(t){return l(r,t),e=e.substr(d+t.length),t}):a=!1}return i[t]?"":t.slice(1,t.length-1)}),!a)return null;var s=new Date(r.year,r.month,r.day);return new Date(s.getFullYear(),s.getMonth(),s.getDate())})(e,t)}return function(){function e(e){var a=this;if(this.date=new Date,this.startDate=new Date,this.endDate=null,this.dates=[],this.selected=[],this.currentSelection=[],this.data={},this.disables={},this.limit=1,this.language={},this.element=null,this.double=!1,this.flatView=!1,this.multiViews=!1,this.singleView=!0,this.bindData=!1,this.infiniteMode=!1,this.isInit=!1,this.on=t.$on,this.format=function(e,t){return function(e,t){t||(t="YYYY-MM-DD"),t=t.toUpperCase();var a={YYYY:e.getFullYear(),DD:s(e.getDate()),MM:s(e.getMonth()+1),D:e.getDate(),M:e.getMonth()+1},n=function(e){var t=e.split(/\W/,3);t.shift();for(var a=[],n=0;n<t.length;n++){var i=t[n];/\w\w/.test(i)&&a.push(i)}return t.length===a.length}(t);return{origin:e,date:n?a.DD:a.D,month:n?a.MM:a.M,year:a.YYYY,day:e.getDay(),value:t.replace(/(?:\b|%)([dDMyY]+)(?:\b|%)/g,function(e,t){return void 0===a[t]?t:a[t]})}}(e,t||a.dateFormat)},this.parse=function(e,t){return k(e,t||a.dateFormat)},this.inDates=function(e){return a.dates.indexOf(e)>=0},this.update=function(e){var t=e.type,n=e.value;"selected"===t?a.setDates(n,!1):"switch"===t&&a.currentSelection.length>0&&(a.selected=a.currentSelection),"disabled"!==t&&"switch"!==t&&a.emit("update",e)},this.setDates=function(e){if(d(e)){var t=[],n="",r="";if(a.double){e.length>2&&(e=e.slice(0,2)),n=e[0],r=e[e.length-1];var s=c(n)?n:a.parse(n),l=c(r)?r:a.parse(r),o=-1*i(s,l,"days");if(a.bindData)if(!function(t,n,i){if(i<0||i>a.limit||!a.inDates(a.format(t).value)&&!a.inDates(a.format(n).value)||!a.inDates(a.format(t).value))return p("setDates","Illegal dates,["+e+"]"),!1;for(var r=0;r<=i;r++){var s=new Date(t.getFullYear(),t.getMonth(),t.getDate()+r),l=a.format(s).value;if(r<i&&!a.inDates(l))return p("setDates","Illegal date,{dates:["+l+"]}"),!1}return!0}(s,l,o))return!1;t=[a.format(s).value,a.format(l).value]}else{var u=e[e.length-1];t=[c(u)?a.format(u).value:u]}a.currentSelection=t}else p("setDates","no dates provided,"+(e=[]))},this.setDisabled=function(e){if(!e||o(e)&&Object.keys(e).length<=0)return p("setDisabled","invalid params, \nparams should be {dates:<Array<any>>[], days:<Array<number>>[] }"),!1;if(!d(e.dates)&&!d(e.days))return p("setDisabled","invalid params  { dates:<Array<any>>"+e.dates+", days:<Array<number>>"+e.days+" }"),!1;var t={},n=[];if(d(e.dates))for(var i=0,r=e.dates;i<r.length;i++){c(D=r[i])?n.push(a.format(D).value):n.push(D)}if(d(e.days))for(var s=0,l=e.days;s<l.length;s++){var u=l[s],h=a.element.querySelectorAll('[data-day="'+u+'"');if(h)for(var f=0,g=h;f<g.length;f++){(D=g[f].getAttribute("data-date"))&&n.push(D)}}for(var v=0,m=n;v<m.length;v++){var D;t[D=m[v]]=D}a.disables=t},!e)return{diff:this.diff,parse:this.parse,format:function(e,t){return a.format(e,t).value}};this.init(e)}return e.prototype.emit=function(e,a){return t.$emit(e,a)},e.prototype.currentRange=function(e){var t=this.currentSelection.length>0?this.currentSelection:this.double?this.selected:[this.format(this.date).value];return Y({collector:this.element,collection:this.element.querySelectorAll(".calendar-date-cell:not(.empty)"),data:t,isDouble:this.double,parse:this.parse,format:this.format,inDates:this.inDates,disables:this.disables,isInit:e})},e.prototype.doMonthSwitch=function(e){var t={year:this.date.getFullYear(),month:this.date.getMonth(),date:this.date.getDate()};this.date=new Date(t.year,t.month+e,t.date),this.isInit=!1,this.createDatePicker(!1)},e.prototype.bindMonthSwitch=function(){var e=this,t=this.element.querySelector(".calendar-action-prev"),a=this.element.querySelector(".calendar-action-next");t&&a&&(this.infiniteMode?(a.addEventListener("click",function(){return e.doMonthSwitch(1)}),t.addEventListener("click",function(){return e.doMonthSwitch(-1)})):(i(this.date,this.endDate)>=1?a.addEventListener("click",function(){e.doMonthSwitch(1),f(t,"disabled"),f(t,"calendar-action-disabled")}):(h(a,"disabled"),h(a,"calendar-action-disabled")),i(this.date,this.startDate)>=1?t.addEventListener("click",function(){e.doMonthSwitch(-1),f(a,"disabled"),f(a,"calendar-action-disabled")}):(h(t,"disabled"),h(t,"calendar-action-disabled"))))},e.prototype.pickDate=function(){S({element:this.element,selected:this.selected,isDouble:this.double,source:this.dates,parse:this.parse,format:this.format,limit:this.limit,inDates:this.inDates,update:this.update,infiniteMode:this.infiniteMode,bindData:this.bindData})},e.prototype.dataRenderer=function(){var e=this;if(Object.keys(this.data).length>0)var t=g(function(){e.emit("data",{data:e.data,nodeList:e.element.querySelectorAll(".calendar-cell")}),v(t)})},e.prototype.setLanguage=function(e){return d(e.days)&&d(e.months)&&(this.language={week:e.days,title:function(t,a){return e.year?""+t+e.year+e.months[a]:e.months[a]+" "+t}}),!1},e.prototype.disable=function(){var e=this;if(Object.keys(this.disables).length>0)var t=g(function(){e.emit("disabled",{nodeList:e.element.querySelectorAll(".calendar-cell"),dateList:e.disables}),v(t)})},e.prototype.setData=function(e){var t,a=this;if("[object Function]"===l(e)){var n=e({data:{},dates:[]});!o(t=n)||Object.keys(t.data).length<=0||t.dates.length<=0||(this.data=n.data,this.dates=n.dates.sort(function(e,t){return a.parse(e)-a.parse(t)}))}},e.prototype.diff=function(e,t){return i(e,t,"days")},e.prototype.createDatePicker=function(e){(this.element.innerHTML=new y({startDate:this.date,endDate:this.endDate,multiViews:this.multiViews,flatView:this.flatView,singleView:this.singleView,language:this.language,infiniteMode:this.infiniteMode,dateFormatter:this.format,dateParser:this.parse}).template,this.selected=this.currentRange(this.isInit),this.singleView)&&(this.double&&this.selected.length>=2&&this.selected[0]===this.selected[this.selected.length-1]&&this.selected.pop());var t={type:e?"init":"switch",value:this.selected};this.bindMonthSwitch(),this.disable(),this.pickDate(),this.dataRenderer(),this.update(t)},e.prototype.init=function(e){var t=this,a=new Date;e.doubleSelect&&(this.double=e.doubleSelect),this.dateFormat=e.format;var n,s=(n=e.views,parseInt(n,10));if("auto"!==e.views&&isNaN(s)||1===s||s>2||s<=0?this.singleView=!0:"auto"===e.views?(this.flatView=!0,this.singleView=!1):2===s&&(this.multiViews=!0,this.singleView=!1),this.startDate=c(e.from)?e.from:new Date,this.endDate=c(e.to)?e.to:new Date(this.startDate.getFullYear(),this.startDate.getMonth()+6,0),this.date=this.startDate,this.limit=this.double?"[object Number]"===l(e.limit)?e.limit:2:1,Object.keys(this.language).length<=0){var d={days:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],months:["01\u6708","02\u6708","03\u6708","04\u6708","05\u6708","06\u6708","07\u6708","08\u6708","09\u6708","10\u6708","11\u6708","12\u6708"],year:"\u5e74"};this.language={week:d.days,title:function(e,t){return d.year?""+e+d.year+d.months[t]:d.months[t]+" "+e}}}if(this.element=m(e.el),!this.element)return p("init","invalid selector,current selector "+this.element),!1;this.element.className=this.element.className+" calendar calendar-"+(this.multiViews?"double-views":this.singleView?"single-view":"flat-view");var o=g(function(){if(t.isInit=t.currentSelection.length>0,t.bindData=Object.keys(t.data).length>0,c(e.from)&&c(e.to)||(t.infiniteMode=!0,t.flatView=!1,t.bindData&&p("init","infiniteMode is on, please provide [from] and [to] while binding data to datepicker  ")),!t.bindData){for(var n=i(t.endDate,a,"days"),s=a.getFullYear(),l=a.getMonth(),d=a.getDate(),u=[],h=0;h<n;h++){var f=new Date(s,l,d+h),g=t.format(f).value;u.push(g)}t.dates=u}var m=r(t.endDate.getFullYear(),t.endDate.getMonth()),D=t.endDate.getDate(),y=m-D;for(h=0;h<y;h++){d=new Date(t.endDate.getFullYear(),t.endDate.getMonth(),D+h),g=t.format(d).value;t.disables[g]=g}if(Object.keys(t.disables).length>0){var b=t.dates,w=[],M=function(e,t){var a={};for(var n in t)e.indexOf(n)>=0&&(a[n]=n);return a}(Object.keys(t.disables),t.data);for(var Y in M)delete t.data[Y];for(var S=0,V=b;S<V.length;S++){M[d=V[S]]||w.push(d)}t.dates=w}t.flatView||(t.currentSelection.length>0?t.date=t.parse(t.currentSelection[0]):t.dates.length>0&&(t.date=t.parse(t.dates[0]))),t.createDatePicker(!0),v(o)})},e}()});