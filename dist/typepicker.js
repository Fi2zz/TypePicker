/*!
 * TypePicker v6.1.2
 * 2019/7/31
 * A date picker use in web and react-native and nodejs
 * (c) 2017-2019,Fi2zzz <wenjingbiao@outlook.com>
 * https://github.com/Fi2zz/datepicker
 * MIT License
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TypePicker=e():t.TypePicker=e()}(this,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={map:function(t,e){return r.isList(t)?t.map(function(t,n){return e(t,n)}):[]},create:function(t,e){e=e||void 0;var n=[];if(!t||0===t)return n;for(var i=0;i<t;i++)n.push(e?"function"==typeof e?e(i):e:i);return n},dedup:function(t,e){var n={};return t.length<=0?[]:t.reduce(function(t,i){var r=i;return e&&(r="function"==typeof e?e(r,n):i[e]),n[r]||(n[r]=1,t.push(r)),t},[])},loop:function(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n];e(r,t.indexOf(r),t)}},every:function(t,e){return!(!r.isList(t)||t.length<=0)&&t.every(e)},findIndex:function(t,e){return t.indexOf(e)},isTop:function(t,e){return 0===r.findIndex(t,e)},isTail:function(t,e){return r.findIndex(t,e)===r.length(t)-1},isList:function(t){return t instanceof Array},includes:function(t,e){return r.findIndex(t,e)>=0},length:function(t){return t.length}},u=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e(t.apply(void 0,n))}},t)},o=function(t){return/^[1-9]?[0-9]+$/.test(""+t)},a=function(t){return/^(-)?[1-9]?[0-9]+$/.test(""+t)},s=function(t){return"boolean"==typeof t},c=function(){return(""+4294967296*Math.random()).replace(".","-")},f=function(){function t(t){var e=this;this.name="observe",this.clientList={},this.subscribe=function(t,n){var i=e.getType(t);e.clientList[i]||(e.clientList[i]=[]),e.clientList[i].push(n)},this.publish=function(t,n){p.delay(function(){var i=e.clientList[e.getType(t)];if(!i||0===i.length)return!1;for(var r=0,u=i;r<u.length;r++){(0,u[r])(n)}},1)},this.name=t}return t.prototype.getType=function(t){return""+this.name+t},t}(),l=function(){function t(t){this.value=t}return t.prototype.toString=function(){return""+ +this.value+this.disabled},t}(),d=function(t,e){var n=this;this.size=1,this.list=[],this.canPushInvalid=!1,this.last=function(){return n.list[n.length()-1]},this.front=function(){return n.fetch(0)},this.length=function(){return n.list.length},this.fetch=function(t){return t>=0?n.list[t]:n.list},this.isEmpty=function(){return n.length()<=0},this.isFullFilled=function(){return n.length()===n.size},this.clean=function(){return n.list=[]},this.shift=function(){return n.list.shift()},this.pop=function(){return n.list.pop()},this.push=function(t){return function(e){if(n.list.filter(function(e){return e.toString()===t.toString()}).length>0){if(1===n.length())return;2===n.size?n.shift():n.clean()}n.list.push(t),p.delay(e)}},this.size=t,this.canPushInvalid=e},p=new(function(){function t(){this.millisecondsOfDate=864e5,this.isDate=function(t){return t instanceof Date}}return t.prototype.diff=function(t,e,n,i){var r;if(void 0===n&&(n="days"),!p.isDate(t)||!p.isDate(e))return 0;var u=this.dateComponents(t),o=this.dateComponents(e);return"month"===n?r=Math.abs(12*u.year+u.month)-(12*o.year+o.month):"days"===n&&(r=Math.ceil(u.time-o.time)/p.millisecondsOfDate),i?Math.abs(r):r},t.prototype.delay=function(t,e){void 0===e&&(e=0);var n=setTimeout(function(){t(),clearTimeout(n)},e)},t.prototype.dateComponents=function(t){var e=t.getMonth(),n=t.getFullYear(),i=t.getDate(),r=t.getDay(),u=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),s=t.getMilliseconds();return{year:n,date:i,month:e,day:r,hours:u,minutes:o,seconds:a,ms:s,milliseconds:s,dateString:t.toDateString(),isoString:t.toISOString(),time:t.getTime(),timezoneOffset:t.getTimezoneOffset()}},t.prototype.createDate=function(t){var e=t.year,n=t.month,i=t.date,r=t.minutes,u=void 0===r?0:r,o=t.hours,a=void 0===o?0:o,s=t.seconds,c=void 0===s?0:s,f=t.milliseconds;return new Date(e,n,i,a,u,c,void 0===f?0:f)},t.prototype.today=function(){var t=new Date,e=this.dateComponents(t);return this.createDate({year:e.year,month:e.month,date:e.date})},t}());function h(t,e){return e[t.toDateString()]?null:t}var v=function(t,e){return function(n){var i={isActive:!1,isEnd:!1,isStart:!1,inRange:!1};if(t.length()<=0)return i;var o=function(t){return p.dateComponents(t).dateString};if(e){var a=t.fetch(0),s=t.fetch(t.length()-1),c=u(function(t,e){return p.diff(t,e,"days",!0)},function(t){return r.create(t+1)},function(t){return r.map(t,function(t){var e=p.dateComponents(a.value);e.date+=t;var n=p.createDate(e);return o(n)})})(s.value,a.value);i.isActive=r.isTop(c,n)||r.isTail(c,n),i.inRange=r.includes(c,n),i.isStart=r.isTop(c,n),i.isEnd=r.isTail(c,n),(i.isStart||i.isEnd)&&(i.inRange=!1)}else i.isActive=u(function(t){return r.map(t,function(t){return t.value})},function(t){return r.map(t,o)},function(t){return r.includes(t,n)})(t.fetch());return i}},y=function(){function t(t,e,n){this.updater=null,this.queue=null,this.data=[],this.disables=null,this.disables=e,this.queue=t,this.updater=function(e){return n(t,e)}}return t.prototype.checkQueue=function(t){var e=this.queue,n=this.disables,i=t.value,o=e.last(),a=e.front();return function(t,e,n,i){var r=t.length(),u=r+1;if(e){if(2!==t.size||2===t.size&&(1===r&&n()||t.isEmpty()||t.isFullFilled()||!t.canPushInvalid))return!1}else 2===t.size&&r&&(n()?t.shift():i()&&t.pop());return u>t.size&&t.clean(),!0}(e,t.disabled,function(){if(t.disabled&&i<o.value)return!0;return u(function(t){var e=t[0],n=t[1];return[p.diff(e,n,"days",!0),n]},function(t){var e=t[0],n=t[1];return r.create(e,function(t){return function(e){var n=p.dateComponents(t);return n.date+=e,p.createDate(n)}}(n))},function(t){return r.map(t,function(t){return n.find(t)&&p.dateComponents(t).time!==p.dateComponents(i).time})},function(t){return t.filter(function(t){return!0===t})},function(t){return r.length(t)>0})([t.value,a.value])},function(){return a.value>i})},t.prototype.push=function(t,e){var n=this;void 0===e&&(e=!1);var i=r.isList(t)?t:[t];e&&(this.queue.clean(),this.data=[]),this.data=r.map(i,function(t){if(p.isDate(t)){var e=p.dateComponents(t),i=p.createDate(e),r=new l(i);return r.disabled=n.disables.find(i),r}console.error("Error: expected Date object, but got "+t+" ")}),r.length(this.data)<=0&&this.updater([]),r.loop(this.data,function(t){p.delay(function(){t.disabled=n.disables.find(t.value)},0);n.checkQueue(t)&&n.queue.push(t)(function(){return n.updater(n.queue.fetch())})})},t}(),m={update:"update",select:"select"};e.default=function(t){var e=this,n={find:function(t){return!1}},l=i({selection:1,date:p.today(),useInvalidAsSelected:!1,size:1},function(t){var e={};return a((t=t||{}).size)&&(e.size=t.size),o(t.selection)&&(e.selection=t.selection),s(t.useInvalidAsSelected)&&(e.useInvalidAsSelected=t.useInvalidAsSelected,!0===t.useInvalidAsSelected&&(e.selection=2)),e}(t)),g=new f(c()),b=new d(l.selection,l.useInvalidAsSelected),D=new y(b,n,function(t,e){var o,a,s=u((o=v(t,2===l.selection),a=n.find,function(t,e){return u(function(t){var e=t.size;return{size:e>=0?e:-1*e,date:t.date}},function(t){var e=t.size,n=t.date;return r.create(e,function(t){var e=p.dateComponents(n);e.month+=t;var r=p.createDate(i({},e,{date:1})),u=p.createDate(i({},e,{month:e.month+1,date:0}));return i({},p.dateComponents(r),{dates:p.dateComponents(u).date,endDate:u,firstDate:r})})},function(t){return r.map(t,function(t){var e=t.day,n=t.year,i=t.month,u=t.endDate,s=t.firstDate;return{year:n,month:i,dates:r.create(42,function(t){var r=p.createDate({year:n,month:i,date:t-e+1}),c=p.dateComponents(r),f=r>u||r<s;return{date:r,invalid:f,disabled:f||a(r),status:o(c.dateString)}})}})})({size:t,date:e})}));g.publish(m.update,s(l.size,l.date)),r.isList(e)&&g.publish(m.select,r.map(e,function(t){return t.value}))});this.listen=function(t){g.subscribe(m.update,function(e){return t({type:m.update,payload:e,types:m})}),g.subscribe(m.select,function(e){return t({type:m.select,payload:e,types:m})})},this.apply={dates:function(t){var e=u(function(t){return t.slice(0,l.selection)},function(t){return t.filter(p.isDate)},function(t){return r.dedup(t,h)},function(t){return r.every(t,p.isDate)?t:[]},function(t){return t.sort(function(t,e){return+t-+e})});p.delay(function(){D.push(e(t),!0)})},disableDate:function(t){return n.find=t},date:function(t){l.date=t,D.updater(null)},update:function(){return D.updater(null)},select:function(t){r.isList(t)&&(t=t.pop()),D.push(t)}},p.delay(function(){e.apply.select(l.date,!0)})}}])});